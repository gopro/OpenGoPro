---
---

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Protocol &mdash; Open GoPro BLE API 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=d4d8e761" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=d45e8c67"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="State Management" href="state_management.html" />
    <link rel="prev" title="BLE Setup" href="ble_setup.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Open GoPro BLE API
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../protocol.html">Protocol</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ble_setup.html">BLE Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ble_setup.html#pairing-mode">Pairing Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble_setup.html#advertisements">Advertisements</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble_setup.html#finish-pairing">Finish Pairing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ble_setup.html#configure-gatt-characteristics">Configure GATT Characteristics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ble_setup.html#ble-characteristics">BLE Characteristics</a></li>
<li class="toctree-l4"><a class="reference internal" href="ble_setup.html#send-messages">Send Messages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packetization">Packetization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#packet-headers">Packet Headers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#decipher-message-payload-type">Decipher Message Payload Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#message-payload">Message Payload</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#type-length-value">Type Length Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#protobuf">Protobuf</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="state_management.html">State Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="state_management.html#camera-readiness">Camera Readiness</a></li>
<li class="toctree-l3"><a class="reference internal" href="state_management.html#keep-alive">Keep Alive</a></li>
<li class="toctree-l3"><a class="reference internal" href="state_management.html#camera-control">Camera Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="id_tables.html">ID Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="id_tables.html#command-ids">Command IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="id_tables.html#query-ids">Query IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="id_tables.html#protobuf-ids">Protobuf IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="id_tables.html#setting-ids">Setting IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="id_tables.html#status-ids">Status IDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="protobuf.html">Protobuf Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#enums">Enums</a><ul>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumcohnnetworkstate">EnumCOHNNetworkState</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumcohnstatus">EnumCOHNStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumcameracontrolstatus">EnumCameraControlStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumflatmode">EnumFlatMode</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumlens">EnumLens</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumlivestreamerror">EnumLiveStreamError</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumlivestreamstatus">EnumLiveStreamStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumpresetgroup">EnumPresetGroup</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumpresetgroupicon">EnumPresetGroupIcon</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumpreseticon">EnumPresetIcon</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumpresettitle">EnumPresetTitle</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumprovisioning">EnumProvisioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumregisterlivestreamstatus">EnumRegisterLiveStreamStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumregisterpresetstatus">EnumRegisterPresetStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumresultgeneric">EnumResultGeneric</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumscanentryflags">EnumScanEntryFlags</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumscanning">EnumScanning</a></li>
<li class="toctree-l4"><a class="reference internal" href="protobuf.html#enumwindowsize">EnumWindowSize</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#media">Media</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#notifprovisioningstate">NotifProvisioningState</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#notifstartscanning">NotifStartScanning</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#notifycohnstatus">NotifyCOHNStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#notifylivestreamstatus">NotifyLiveStreamStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#notifypresetstatus">NotifyPresetStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#preset">Preset</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#presetgroup">PresetGroup</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#presetsetting">PresetSetting</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestcohncert">RequestCOHNCert</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestclearcohncert">RequestClearCOHNCert</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestconnect">RequestConnect</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestconnectnew">RequestConnectNew</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestcreatecohncert">RequestCreateCOHNCert</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestcustompresetupdate">RequestCustomPresetUpdate</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestgetapentries">RequestGetApEntries</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestgetcohnstatus">RequestGetCOHNStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestgetlastcapturedmedia">RequestGetLastCapturedMedia</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestgetlivestreamstatus">RequestGetLiveStreamStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestgetpresetstatus">RequestGetPresetStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestreleasenetwork">RequestReleaseNetwork</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestsetcohnsetting">RequestSetCOHNSetting</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestsetcameracontrolstatus">RequestSetCameraControlStatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestsetlivestreammode">RequestSetLiveStreamMode</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requestsetturboactive">RequestSetTurboActive</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#requeststartscan">RequestStartScan</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responsecohncert">ResponseCOHNCert</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responseconnect">ResponseConnect</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responseconnectnew">ResponseConnectNew</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responsegeneric">ResponseGeneric</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responsegetapentries">ResponseGetApEntries</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responselastcapturedmedia">ResponseLastCapturedMedia</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responsestartscanning">ResponseStartScanning</a></li>
<li class="toctree-l3"><a class="reference internal" href="protobuf.html#responsegetapentries-scanentry">ResponseGetApEntries::ScanEntry</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/control.html">Control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/control.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#keep-alive"><code class="docutils literal notranslate"><span class="pre">Keep</span> <span class="pre">Alive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-analytics"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Analytics</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-ap-control"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">AP</span> <span class="pre">Control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-camera-control"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Camera</span> <span class="pre">Control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-date-time"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Date</span> <span class="pre">Time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-local-date-time"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Local</span> <span class="pre">Date</span> <span class="pre">Time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-shutter"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Shutter</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#set-turbo-transfer"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Turbo</span> <span class="pre">Transfer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/control.html#sleep"><code class="docutils literal notranslate"><span class="pre">Sleep</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/query.html">Query</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/query.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-open-gopro-version"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Open</span> <span class="pre">GoPro</span> <span class="pre">Version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-date-time"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Date</span> <span class="pre">Time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-hardware-info"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Hardware</span> <span class="pre">Info</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-local-date-time"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Local</span> <span class="pre">Date</span> <span class="pre">Time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-last-captured-media"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Last</span> <span class="pre">Captured</span> <span class="pre">Media</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-setting-values"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Setting</span> <span class="pre">Values</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-status-values"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Status</span> <span class="pre">Values</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#get-setting-capabilities"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Setting</span> <span class="pre">Capabilities</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#register-for-setting-value-updates"><code class="docutils literal notranslate"><span class="pre">Register</span> <span class="pre">for</span> <span class="pre">Setting</span> <span class="pre">Value</span> <span class="pre">Updates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#register-for-status-value-updates"><code class="docutils literal notranslate"><span class="pre">Register</span> <span class="pre">for</span> <span class="pre">Status</span> <span class="pre">Value</span> <span class="pre">Updates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#register-for-setting-capability-updates"><code class="docutils literal notranslate"><span class="pre">Register</span> <span class="pre">for</span> <span class="pre">Setting</span> <span class="pre">Capability</span> <span class="pre">Updates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#unregister-for-setting-value-updates"><code class="docutils literal notranslate"><span class="pre">Unregister</span> <span class="pre">for</span> <span class="pre">Setting</span> <span class="pre">Value</span> <span class="pre">Updates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#unregister-for-status-value-updates"><code class="docutils literal notranslate"><span class="pre">Unregister</span> <span class="pre">for</span> <span class="pre">Status</span> <span class="pre">Value</span> <span class="pre">Updates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/query.html#unregister-for-setting-capability-updates"><code class="docutils literal notranslate"><span class="pre">Unregister</span> <span class="pre">for</span> <span class="pre">Setting</span> <span class="pre">Capability</span> <span class="pre">Updates</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/access_points.html">Access Point</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/access_points.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/access_points.html#scan-for-access-points"><code class="docutils literal notranslate"><span class="pre">Scan</span> <span class="pre">for</span> <span class="pre">Access</span> <span class="pre">Points</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/access_points.html#get-ap-scan-results"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">AP</span> <span class="pre">Scan</span> <span class="pre">Results</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/access_points.html#connect-to-provisioned-access-point"><code class="docutils literal notranslate"><span class="pre">Connect</span> <span class="pre">to</span> <span class="pre">Provisioned</span> <span class="pre">Access</span> <span class="pre">Point</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/access_points.html#connect-to-a-new-access-point"><code class="docutils literal notranslate"><span class="pre">Connect</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">New</span> <span class="pre">Access</span> <span class="pre">Point</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/access_points.html#disconnect-from-access-point">Disconnect from Access Point</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/live_streaming.html">Live Streaming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/live_streaming.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/live_streaming.html#set-livestream-mode"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Livestream</span> <span class="pre">Mode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/live_streaming.html#get-livestream-status"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Livestream</span> <span class="pre">Status</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/cohn.html">Camera on the Home Network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/cohn.html#certificates">Certificates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#verifying-certificate">Verifying Certificate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#view-certificate-details">View Certificate Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../features/cohn.html#provisioning-procedure">Provisioning Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/cohn.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#clear-cohn-certificate"><code class="docutils literal notranslate"><span class="pre">Clear</span> <span class="pre">COHN</span> <span class="pre">Certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#create-cohn-certificate"><code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">COHN</span> <span class="pre">Certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#get-cohn-certificate"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">COHN</span> <span class="pre">Certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#get-cohn-status"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">COHN</span> <span class="pre">Status</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/cohn.html#set-cohn-setting"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">COHN</span> <span class="pre">Setting</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/hilights.html">Hilights</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/hilights.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/hilights.html#hilight-moment"><code class="docutils literal notranslate"><span class="pre">Hilight</span> <span class="pre">Moment</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/presets.html">Presets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/presets.html#preset-groups">Preset Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/presets.html#preset-modified-status">Preset Modified Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/presets.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/presets.html#get-available-presets"><code class="docutils literal notranslate"><span class="pre">Get</span> <span class="pre">Available</span> <span class="pre">Presets</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/presets.html#load-preset"><code class="docutils literal notranslate"><span class="pre">Load</span> <span class="pre">Preset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/presets.html#load-preset-group"><code class="docutils literal notranslate"><span class="pre">Load</span> <span class="pre">Preset</span> <span class="pre">Group</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/presets.html#update-custom-preset"><code class="docutils literal notranslate"><span class="pre">Update</span> <span class="pre">Custom</span> <span class="pre">Preset</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/settings.html">Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/settings.html#camera-capabilities">Camera Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#xlsx">XLSX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#json">JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../features/settings.html#operations">Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#set-setting"><code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">Setting</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../features/settings.html#setting-ids">Setting IDs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#resolution-2">Resolution (2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#frames-per-second-3">Frames Per Second (3)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#fov-43">FOV (43)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#auto-off-59">Auto Off (59)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#gps-83">GPS (83)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#aspect-ratio-108">Aspect Ratio (108)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#lens-121">Lens (121)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#lens-122">Lens (122)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#lens-123">Lens (123)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#format-128">Format (128)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#anti-flicker-134">Anti-Flicker (134)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#hypersmooth-135">Hypersmooth (135)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#horizon-leveling-150">Horizon Leveling (150)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#horizon-leveling-151">Horizon Leveling (151)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#max-lens-mod-enable-162">Max Lens Mod Enable (162)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#hindsight-167">HindSight (167)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#interval-171">Interval (171)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#duration-172">Duration (172)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#video-performance-modes-173">Video Performance Modes (173)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#controls-175">Controls (175)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#speed-176">Speed (176)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#night-photo-177">Night Photo (177)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#wi-fi-band-178">Wi-fi Band (178)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#trail-length-179">Trail Length (179)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#video-mode-180">Video Mode (180)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#bit-rate-182">Bit Rate (182)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#bit-depth-183">Bit Depth (183)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#profiles-184">Profiles (184)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#video-mode-186">Video Mode (186)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#lapse-mode-187">Lapse Mode (187)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#max-lens-mod-189">Max Lens Mod (189)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#max-lens-mod-enable-190">Max Lens Mod Enable (190)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#photo-mode-191">Photo Mode (191)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#aspect-ratio-192">Aspect Ratio (192)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/settings.html#framing-193">Framing (193)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/statuses.html">Statuses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/statuses.html#status-ids">Status IDs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-system-s-internal-battery-present-1">Is the system’s internal battery present? (1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#rough-approximation-of-internal-battery-level-in-bars-or-charging-2">Rough approximation of internal battery level in bars (or charging) (2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-system-currently-overheating-6">Is the system currently overheating? (6)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-camera-busy-8">Is the camera busy? (8)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-quick-capture-feature-enabled-9">Is Quick Capture feature enabled? (9)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-system-encoding-right-now-10">Is the system encoding right now? (10)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-lcd-lock-active-11">Is LCD lock active? (11)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#when-encoding-video-this-is-the-duration-seconds-of-the-video-so-far-0-otherwise-13">When encoding video, this is the duration (seconds) of the video so far; 0 otherwise (13)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#are-wireless-connections-enabled-17">Are Wireless Connections enabled? (17)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-pairing-state-of-the-camera-19">The pairing state of the camera (19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-last-type-of-pairing-in-which-the-camera-was-engaged-20">The last type of pairing in which the camera was engaged (20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#time-since-boot-milliseconds-of-last-successful-pairing-complete-action-21">Time since boot (milliseconds) of last successful pairing complete action (21)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#state-of-current-scan-for-wifi-access-points-22">State of current scan for WiFi Access Points (22)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#time-since-boot-milliseconds-that-the-wifi-access-point-scan-completed-23">Time since boot (milliseconds) that the WiFi Access Point scan completed (23)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#wifi-ap-provisioning-state-24">WiFi AP provisioning state (24)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#wireless-remote-control-version-26">Wireless remote control version (26)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-a-wireless-remote-control-connected-27">Is a wireless remote control connected? (27)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#wireless-pairing-state-each-bit-contains-state-information-see-wirelesspairingstateflags-28">Wireless Pairing State. Each bit contains state information (see WirelessPairingStateFlags) (28)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#ssid-of-the-ap-the-camera-is-currently-connected-to-on-ble-connection-value-is-big-endian-byte-encoded-int32-29">SSID of the AP the camera is currently connected to. On BLE connection, value is big-endian byte-encoded int32 (29)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-camera-s-wifi-ssid-on-ble-connection-value-is-big-endian-byte-encoded-int32-30">The camera’s WiFi SSID. On BLE connection, value is big-endian byte-encoded int32 (30)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-number-of-wireless-devices-connected-to-the-camera-31">The number of wireless devices connected to the camera (31)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-preview-stream-enabled-32">Is Preview Stream enabled? (32)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#primary-storage-status-33">Primary Storage Status (33)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#how-many-photos-can-be-taken-with-current-settings-before-sdcard-is-full-34">How many photos can be taken with current settings before sdcard is full (34)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#how-many-minutes-of-video-can-be-captured-with-current-settings-before-sdcard-is-full-35">How many minutes of video can be captured with current settings before sdcard is full (35)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#total-number-of-photos-on-sdcard-38">Total number of photos on sdcard (38)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#total-number-of-videos-on-sdcard-39">Total number of videos on sdcard (39)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-current-status-of-over-the-air-ota-update-41">The current status of Over The Air (OTA) update (41)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-there-a-pending-request-to-cancel-a-firmware-update-download-42">Is there a pending request to cancel a firmware update download? (42)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-locate-camera-feature-active-45">Is locate camera feature active? (45)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-current-timelapse-interval-countdown-value-e-g-5-4-3-2-1-49">The current timelapse interval countdown value (e.g. 5…4…3…2…1…) (49)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#remaining-space-on-the-sdcard-in-kilobytes-54">Remaining space on the sdcard in Kilobytes (54)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-preview-stream-supported-in-current-recording-mode-secondary-stream-55">Is preview stream supported in current recording/mode/secondary-stream? (55)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#wifi-signal-strength-in-bars-56">WiFi signal strength in bars (56)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-number-of-hilights-in-currently-encoding-video-value-is-set-to-0-when-encoding-stops-58">The number of hilights in currently-encoding video (value is set to 0 when encoding stops) (58)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#time-since-boot-milliseconds-of-most-recent-hilight-in-encoding-video-set-to-0-when-encoding-stops-59">Time since boot (milliseconds) of most recent hilight in encoding video (set to 0 when encoding stops) (59)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-minimum-time-between-camera-status-updates-milliseconds-best-practice-is-to-not-poll-for-status-more-often-than-this-60">The minimum time between camera status updates (milliseconds). Best practice is to not poll for status more often than this (60)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#how-many-minutes-of-time-lapse-video-can-be-captured-with-current-settings-before-sdcard-is-full-64">How many minutes of Time Lapse Video can be captured with current settings before sdcard is full (64)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#liveview-exposure-select-mode-65">Liveview Exposure Select Mode (65)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#liveview-exposure-select-y-coordinate-percent-66">Liveview Exposure Select: y-coordinate (percent) (66)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#liveview-exposure-select-y-coordinate-percent-67">Liveview Exposure Select: y-coordinate (percent) (67)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#does-the-camera-currently-have-a-gps-lock-68">Does the camera currently have a GPS lock? (68)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-camera-in-ap-mode-69">Is the camera in AP Mode? (69)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#internal-battery-level-percent-70">Internal battery level (percent) (70)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#microphone-accessory-status-74">Microphone Accessory status (74)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#digital-zoom-level-percent-75">Digital Zoom level (percent) (75)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#wireless-band-76">Wireless Band (76)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-digital-zoom-feature-available-77">Is Digital Zoom feature available? (77)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#are-current-video-settings-mobile-friendly-related-to-video-compression-and-frame-rate-78">Are current video settings mobile friendly? (related to video compression and frame rate) (78)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-camera-currently-in-first-time-use-ftu-ui-flow-79">Is the camera currently in First Time Use (FTU) UI flow? (79)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-5ghz-wireless-band-available-81">Is 5GHz wireless band available? (81)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-system-fully-booted-and-ready-to-accept-commands-82">Is the system fully booted and ready to accept commands? (82)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-internal-battery-charged-sufficiently-to-start-over-the-air-ota-update-83">Is the internal battery charged sufficiently to start Over The Air (OTA) update? (83)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-camera-getting-too-cold-to-continue-recording-85">Is the camera getting too cold to continue recording? (85)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#rotational-orientation-of-the-camera-86">Rotational orientation of the camera (86)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-this-camera-model-capable-of-zooming-while-encoding-88">Is this camera model capable of zooming while encoding? (88)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-flatmode-id-89">Current Flatmode ID (89)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-video-preset-id-93">Current Video Preset (ID) (93)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-photo-preset-id-94">Current Photo Preset (ID) (94)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-time-lapse-preset-id-95">Current Time Lapse Preset (ID) (95)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-preset-group-id-corresponds-to-ui-mode-groups-in-settings-json-96">Current Preset Group (ID) (corresponds to ui_mode_groups in settings.json) (96)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#current-preset-id-97">Current Preset (ID) (97)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#preset-modified-status-which-contains-an-event-id-and-a-preset-group-id-98">Preset Modified Status, which contains an event ID and a Preset (Group) ID (98)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#the-number-of-live-bursts-can-be-captured-with-current-settings-before-sdcard-is-full-99">The number of Live Bursts can be captured with current settings before sdcard is full (99)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#total-number-of-live-bursts-on-sdcard-100">Total number of Live Bursts on sdcard (100)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-capture-delay-currently-active-i-e-counting-down-101">Is Capture Delay currently active (i.e. counting down)? (101)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#media-mod-state-102">Media Mod state (102)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#time-warp-speed-103">Time Warp Speed (103)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-system-s-linux-core-active-104">Is the system’s Linux core active? (104)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#camera-lens-type-reflects-changes-to-setting-162-or-setting-189-105">Camera lens type (reflects changes to setting 162 or setting 189) (105)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-video-hindsight-capture-active-106">Is Video Hindsight Capture Active? (106)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#scheduled-capture-preset-id-107">Scheduled Capture Preset ID (107)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-scheduled-capture-set-108">Is Scheduled Capture set? (108)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#display-mod-status-bitmasked-110">Display Mod Status (bitmasked) (110)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#does-sdcard-meet-specified-minimum-write-speed-111">Does sdcard meet specified minimum write speed? (111)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#number-of-sdcard-write-speed-errors-since-device-booted-112">Number of sdcard write speed errors since device booted (112)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-turbo-transfer-active-113">Is Turbo Transfer active? (113)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#camera-control-status-id-114">Camera control status ID (114)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#is-the-camera-connected-to-a-pc-via-usb-115">Is the camera connected to a PC via USB? (115)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#camera-control-over-usb-state-116">Camera control over USB state (116)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features/statuses.html#total-sd-card-capacity-in-kilobytes-117">Total SD card capacity in Kilobytes (117)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open GoPro BLE API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../protocol.html">Protocol</a></li>
      <li class="breadcrumb-item active">Data Protocol</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-protocol">
<h1>Data Protocol<a class="headerlink" href="#data-protocol" title="Link to this heading"></a></h1>
<p>Note the following terminology used in this section:</p>
<ul class="simple">
<li><p><strong>packet</strong>: GATT-level byte data including packet headers</p></li>
<li><p><strong>message</strong>: Payload data accumulated from one or more packets (not including packet headers)</p></li>
</ul>
<p>This section will describe the data protocol used to send and receive BLE messages. The general procedure to parse a
message is to:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#packetization"><span class="std std-ref">Accumulate and depacketize</span></a> BLE packets to extract the message payload</p></li>
<li><p><a class="reference internal" href="#decipher-message-payload-type"><span class="std std-ref">Decipher</span></a> the message’s ID and payload type</p></li>
<li><p>Depending on the <a class="reference internal" href="#message-payload"><span class="std std-ref">payload type</span></a>, use the per-message documentation
(identified by the message’s ID) to parse the message</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All byte ordering is in Big Endian unless otherwise noted.</p>
</div>
<section id="packetization">
<h2>Packetization<a class="headerlink" href="#packetization" title="Link to this heading"></a></h2>
<p>The BLE protocol (&lt;= v4.2) limits packet size to 20 bytes per packet. To accommodate this limitation, GoPro
cameras use start and continuation packets to packetize larger payloads. If a message is less than 20 bytes, it
can be sent with a single packet containing the start packet header. Otherwise,
it must be split into multiple packets with the first packet containing a start packet header and subsequent packets
containing continuation packet headers.</p>
<section id="packet-headers">
<h3>Packet Headers<a class="headerlink" href="#packet-headers" title="Link to this heading"></a></h3>
<p>Message sending and receiving is accomplished by prepending <strong>General (5-bit)</strong>, <strong>Extended (13-bit)</strong>,
<strong>Extended (16-bit)</strong>, or <strong>Continuation</strong> headers onto each packet depending on the message size and state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For byte-level examples of the below packet types, see the
<a class="reference external" href="https://gopro.github.io/OpenGoPro/tutorials/parse-ble-responses#parsing-multiple-packet-tlv-responses">tutorials</a></p>
</div>
<section id="general-5-bit-packets">
<h4>General (5-bit) Packets<a class="headerlink" href="#general-5-bit-packets" title="Link to this heading"></a></h4>
<p>Messages that are 31 bytes or fewer can be sent or received using the following format:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="8"><p>Byte 0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Start (0)</p></td>
<td colspan="2"><p>General (00)</p></td>
<td colspan="5"><p>5-bit Message Length</p></td>
</tr>
</tbody>
</table>
</section>
<section id="extended-13-bit-packets">
<h4>Extended (13-bit) Packets<a class="headerlink" href="#extended-13-bit-packets" title="Link to this heading"></a></h4>
<p>Messages that are 8191 bytes or fewer can be sent or received using the following format:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="8"><p>Byte 0</p></th>
<th class="head" colspan="8"><p>Byte 1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Start (0)</p></td>
<td colspan="2"><p>13-bit Extended (01)</p></td>
<td colspan="13"><p>13-bit Message Length</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Always use Extended (13-bit) packet headers when sending messages to avoid having to work with multiple packet
header formats.</p>
</div>
</section>
<section id="extended-16-bit-packets">
<h4>Extended (16-bit) Packets<a class="headerlink" href="#extended-16-bit-packets" title="Link to this heading"></a></h4>
<p>If a message is 8192 bytes or longer, the camera will respond using the format below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="8"><p>Byte 0</p></th>
<th class="head" colspan="8"><p>Byte 1</p></th>
<th class="head" colspan="8"><p>Byte 2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Start (0)</p></td>
<td colspan="2"><p>13-bit Extended (10)</p></td>
<td colspan="5"><p>Reserved</p></td>
<td colspan="16"><p>16-bit Message Length</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This format can not be used for sending messages to the camera. It is only used to receive messages.</p>
</div>
</section>
<section id="continuation-packets">
<h4>Continuation Packets<a class="headerlink" href="#continuation-packets" title="Link to this heading"></a></h4>
<p>When sending or receiving a message that is longer than 20 bytes, the message must be split into N packets with packet 1
containing a start packet header and packets 2..N containing a continuation packet header.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Counters start at 0x0 and reset after 0xF.</p>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="8"><p>Byte 0</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7</p></td>
<td><p>6</p></td>
<td><p>5</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Continuation (1)</p></td>
<td colspan="3"><p>Reserved</p></td>
<td colspan="4"><p>4-bit Counter</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="decipher-message-payload-type">
<h2>Decipher Message Payload Type<a class="headerlink" href="#decipher-message-payload-type" title="Link to this heading"></a></h2>
<p>Once the packets have been accumulated and the payload has been extracted, it is necessary to decipher the message type
in order to determine whether it is TLV or Protobuf and then parse it appropriately.</p>
<p>Below is pseudocode describing how to do this:</p>
<pre class="literal-block">Camera sends response message from UUID U (string) with payload P (array of bytes)
// Is it a Protobuf response?
for each row in the <a class="reference internal" href="id_tables.html#protobuf-ids"><span class="std std-ref">Protobuf IDs table</span></a> {
    F (int) = Feature ID
    A (array of int) = Action IDs
    if P[0] == F and P[1] in A {
        P is a <a class="reference internal" href="#protobuf"><span class="std std-ref">Protobuf Message</span></a>
        Match Feature ID P[0] and Action ID P[1] to a Protobuf message in the <a class="reference internal" href="id_tables.html#protobuf-ids"><span class="std std-ref">Protobuf IDs table</span></a>
        Use matched <a class="reference internal" href="protobuf.html"><span class="doc">Protobuf message</span></a> to parse byte payload into useful data structure
        Exit
    }
}
// Nope. It is a TLV response
if U == GP-0072 (Command) {
    Parse message payload using <a class="reference internal" href="id_tables.html#command-ids"><span class="std std-ref">Command Table</span></a> with <a class="reference internal" href="#commands"><span class="std std-ref">Command scheme</span></a>
}
else if U == GP-0074 (Settings) {
    Parse using <a class="reference internal" href="id_tables.html#setting-ids"><span class="std std-ref">Setting ID mapping</span></a> with <a class="reference internal" href="#commands"><span class="std std-ref">Command scheme</span></a>
}
else if U == GP-0076 (Query) {
    Parse message payload using <a class="reference internal" href="id_tables.html#query-ids"><span class="std std-ref">Query Table</span></a> with <a class="reference internal" href="#queries"><span class="std std-ref">Query scheme</span></a>
}</pre>
<p>Alternatively this is described in flowchart form here:</p>
<img alt="../_images/plantuml_ble_tlv_vs_protobuf.png" src="../_images/plantuml_ble_tlv_vs_protobuf.png" />
</section>
<section id="message-payload">
<h2>Message Payload<a class="headerlink" href="#message-payload" title="Link to this heading"></a></h2>
<p>Once the payload has been extracted and had its type deciphered, it can then be parsed depending on its type.
The Open GoPro protocol uses two different top-level message payload formats:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#type-length-value"><span class="std std-ref">Type Length Value (TLV)</span></a></p></li>
<li><p><a class="reference internal" href="#protobuf"><span class="std std-ref">Protobuf</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The byte table examples in this section do not contain the <a class="reference internal" href="#packet-headers"><span class="std std-ref">Packet Headers</span></a>; they only consider the payload.</p>
</div>
<section id="type-length-value">
<h3>Type Length Value<a class="headerlink" href="#type-length-value" title="Link to this heading"></a></h3>
<p>There are two different request / response Type-Length-Value (TLV) schemes as described in the following sections.</p>
<section id="commands">
<h4>Commands<a class="headerlink" href="#commands" title="Link to this heading"></a></h4>
<p>Commands are messages sent / received on either:</p>
<ul class="simple">
<li><p>The Command and Command Response <a class="reference internal" href="ble_setup.html#ble-characteristics"><span class="std std-ref">characteristics</span></a></p></li>
<li><p>The Setting and Setting Response <a class="reference internal" href="ble_setup.html#ble-characteristics"><span class="std std-ref">characteristics</span></a></p></li>
</ul>
<p>They are summarized in the <a class="reference internal" href="id_tables.html#command-ids"><span class="std std-ref">commands table</span></a> and individually documented throughout
the relevant feature section.</p>
<p class="rubric">Command Request</p>
<p>Below is the top level message format for command requests:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type (Command / Setting ID)</p></th>
<th class="head"><p>Optional Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>Array of length-value pairs</p></td>
</tr>
</tbody>
</table>
<p>where each element of the parameter array is:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Length</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p><strong>Length</strong> Bytes</p></td>
</tr>
</tbody>
</table>
<p>The individual command documentation specified by the message’s <a class="reference internal" href="id_tables.html#command-ids"><span class="std std-ref">Command ID</span></a>
will define the length and value options for each of its parameters.</p>
<p class="rubric">Command Response</p>
<p>Below is the top level message format for command responses:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Type (Command / Setting ID)</p></th>
<th class="head"><p>Command Status</p></th>
<th class="head"><p>Optional Response</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>1 Byte</p></td>
<td><p>Variable Length</p></td>
</tr>
</tbody>
</table>
<p>The individual command documentation specified by the message’s
<a class="reference internal" href="id_tables.html#command-ids"><span class="std std-ref">Command ID</span></a> will define the response.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For byte-level examples, see the
<a class="reference external" href="https://gopro.github.io/OpenGoPro/tutorials/send-ble-commands#sending-commands">tutorials</a>.</p>
</div>
</section>
<section id="queries">
<h4>Queries<a class="headerlink" href="#queries" title="Link to this heading"></a></h4>
<p>Queries are messages sent / received on the Query and Query Response <a class="reference internal" href="ble_setup.html#ble-characteristics"><span class="std std-ref">characteristics</span></a>,
respectively. They are summarized in the <a class="reference internal" href="id_tables.html#query-ids"><span class="std std-ref">queries table</span></a> and individually documented
in <a class="reference internal" href="../features/query.html"><span class="doc">Query</span></a>.</p>
<p class="rubric">Query Request</p>
<p>Below is the top level message format for query requests:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Query ID</p></th>
<th class="head"><p>Array of Element IDs</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>Variable</p></td>
</tr>
</tbody>
</table>
<p>The individual query documentation specified by the message’s <a class="reference internal" href="id_tables.html#query-ids"><span class="std std-ref">Query ID</span></a>
will define the elements that comprise the element ID array.</p>
<p class="rubric">Query Response</p>
<p>Below is the top level message format for query responses:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Query ID</p></th>
<th class="head"><p>Command Status</p></th>
<th class="head"><p>Query Results</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>1 Byte</p></td>
<td><p>Array of id-length-value triplets</p></td>
</tr>
</tbody>
</table>
<p>where each element of the results array is:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Length</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>1 byte</p></td>
<td><p><strong>Length</strong> Bytes</p></td>
</tr>
</tbody>
</table>
<p>The individual query documentation specified by the message’s
<a class="reference internal" href="id_tables.html#query-ids"><span class="std std-ref">Query ID</span></a> will define the format of the result array.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For byte-level examples, see the
<a class="reference external" href="https://gopro.github.io/OpenGoPro/tutorials/parse-ble-responses#parsing-a-one-packet-tlv-response">tutorials</a>.</p>
</div>
</section>
</section>
<section id="protobuf">
<h3>Protobuf<a class="headerlink" href="#protobuf" title="Link to this heading"></a></h3>
<p>In order to maximize BLE bandwidth, some commands use <a class="reference external" href="https://developers.google.com/protocol-buffers">Google Protobuf (Protocol Buffers)</a>.
Open GoPro currently uses Protocol Buffers <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/proto2-spec">Version 2</a></p>
<p>Protobuf requests and responses are identified by a Feature ID and an Action ID prepended before their serialized payload.
The top level message format for a Protobuf message is as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Feature ID</p></th>
<th class="head"><p>Action ID</p></th>
<th class="head"><p>Serialized Protobuf Message</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1 Byte</p></td>
<td><p>1 Byte</p></td>
<td><p>Variable Length</p></td>
</tr>
</tbody>
</table>
<p>The individual Protobuf object specified by the message’s
<a class="reference internal" href="id_tables.html#protobuf-ids"><span class="std std-ref">action / feature id</span></a> is used to serialize / deserialize the payload.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ble_setup.html" class="btn btn-neutral float-left" title="BLE Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="state_management.html" class="btn btn-neutral float-right" title="State Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>