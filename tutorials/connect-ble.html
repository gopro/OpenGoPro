<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.0 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html lang="en" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Tutorial 1: Connect BLE :  Open GoPro</title>
<meta name="description" content="This tutorial will provide a walk-through to connect to the GoPro camera via Bluetooth Low Energy (BLE).">


  <meta name="author" content="GoPro">
  
  <meta property="article:author" content="GoPro">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Open GoPro">
<meta property="og:title" content="Tutorial 1: Connect BLE">
<meta property="og:url" content="https://gopro.github.io/OpenGoPro/tutorials/connect-ble">


  <meta property="og:description" content="This tutorial will provide a walk-through to connect to the GoPro camera via Bluetooth Low Energy (BLE).">







  <meta property="article:published_time" content="2024-07-01T14:47:28-07:00">






<link rel="canonical" href="https://gopro.github.io/OpenGoPro/tutorials/connect-ble">












<!-- end _includes/seo.html -->


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/OpenGoPro/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>


  
    <script src="/OpenGoPro/assets/js/tabs.js"></script>
  
    <script src="/OpenGoPro/assets/js/quiz.js"></script>
  
    <script src="/OpenGoPro/assets/js/accordion.js"></script>
  


    <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
    // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function (event) {
        var manualAnchors = new AnchorJS();
        manualAnchors.options = {
            titleText: 'Permalink',
            placement: 'left'
        };
        manualAnchors.add('.anchored');
    });
</script>
<link rel="apple-touch-icon" sizes="180x180" href="/OpenGoPro/assets/images/logos/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/OpenGoPro/assets/images/logos/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/OpenGoPro/assets/images/logos/favicon-16x16.png">
<link rel="manifest" href="/OpenGoPro/assets/images/logos/site.webmanifest">
<link rel="mask-icon" href="/OpenGoPro/assets/images/logos/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/OpenGoPro/assets/images/logos/favicon.ico">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-config" content="/assets/images/logos/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/OpenGoPro/"><img src="/OpenGoPro/assets/images/logos/logo.png" alt="Open GoPro"></a>
        
        <a class="site-title" href="/OpenGoPro/">
          Open GoPro
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/OpenGoPro/">Home</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/ble/">BLE Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/http">HTTP Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/tutorials">Tutorials</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://github.com/gopro/OpenGoPro/tree/main/demos">Demos</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/faq">FAQ</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1">
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/tutorials" itemprop="item"><span itemprop="name">Tutorials</span></a>
          <meta itemprop="position" content="2">
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Tutorial 1: Connect BLE</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://gopro.github.io/OpenGoPro/">
        <img src="/OpenGoPro/assets/images/logos/logo_square.png" alt="GoPro" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://gopro.github.io/OpenGoPro/" itemprop="url">GoPro</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Be a <strong>hero</strong>.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">US</span>
        </li>
      

      
        
          
            <li><a href="https://www.gopro.com" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/gopro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox">
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-ble"><span class="nav__sub-title">1: Connect BLE</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-ble-commands"><span class="nav__sub-title">2: Send BLE Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/parse-ble-responses"><span class="nav__sub-title">3: Parse BLE TLV Responses</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-queries"><span class="nav__sub-title">4: BLE Queries</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-protobuf"><span class="nav__sub-title">5: BLE Protobuf</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-wifi"><span class="nav__sub-title">6: Connect WiFi</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-wifi-commands"><span class="nav__sub-title">7: Send WiFi Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/camera-media-list"><span class="nav__sub-title">8: Camera Media List</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/cohn"><span class="nav__sub-title">9: Camera on the Home Network</span></a>
          

          
        </li>
      
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Tutorial 1: Connect BLE">
    <meta itemprop="description" content="This tutorial will provide a walk-through to connect to the GoPro camera via Bluetooth Low Energy (BLE).">
    <meta itemprop="datePublished" content="2024-07-01T14:47:28-07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://gopro.github.io/OpenGoPro/tutorials/connect-ble" itemprop="url">Tutorial 1: Connect BLE
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          13 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
<li>
<a href="#requirements">Requirements</a><ul>
<li><a href="#hardware">Hardware</a></li>
<li><a href="#software">Software</a></li>
</ul>
</li>
<li><a href="#overview--assumptions">Overview / Assumptions</a></li>
<li>
<a href="#setup">Setup</a><ul><li><a href="#just-show-me-the-demo">Just Show me the Demo!!</a></li></ul>
</li>
<li>
<a href="#basic-ble-tutorial">Basic BLE Tutorial</a><ul>
<li><a href="#advertise">Advertise</a></li>
<li><a href="#scan">Scan</a></li>
<li><a href="#connect">Connect</a></li>
<li><a href="#pair">Pair</a></li>
<li><a href="#enable-notifications">Enable Notifications</a></li>
</ul>
</li>
<li>
<a href="#troubleshooting">Troubleshooting</a><ul>
<li><a href="#device-not-connecting">Device not connecting</a></li>
<li><a href="#complete-system-reset">Complete System Reset</a></li>
<li><a href="#logs">Logs</a></li>
</ul>
</li>
<li><a href="#good-job">Good Job!</a></li>
</ul>
            </nav>
          </aside>
        
        <p>This tutorial will provide a walk-through to connect to the GoPro camera via Bluetooth Low Energy (BLE).</p>

<h1 id="requirements">Requirements</h1>

<h2 id="hardware">Hardware</h2>

<ul>
  <li>A GoPro camera that is <a href="/OpenGoPro/ble/index.html#supported-cameras">supported by Open GoPro</a>
</li>
</ul>

<div>
    <ul class="tab tab-linked" data-tab="9276bf59-e6bc-40c4-883b-2384e0fb59a6">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="9276bf59-e6bc-40c4-883b-2384e0fb59a6">
        
            <li class="active tab-content-container">
<ul>
  <li>One of the following systems:
    <ul>
      <li>Windows 10, version 16299 (Fall Creators Update) or greater</li>
      <li>Linux distribution with <a href="http://www.bluez.org/">BlueZ</a> &gt;= 5.43</li>
      <li>OS X/macOS support via Core Bluetooth API, from at least OS X version 10.11</li>
    </ul>
  </li>
</ul>

</li>
        
            <li class="tab-content-container">
<ul>
  <li>An Android Device supporting SDK &gt;= 33</li>
</ul>

</li>
        
    </ul>
</div>

<h2 id="software">Software</h2>

<div>
    <ul class="tab tab-linked" data-tab="a78acd29-eaed-41ef-b3f1-80b9dc5f5e76">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="a78acd29-eaed-41ef-b3f1-80b9dc5f5e76">
        
            <li class="active tab-content-container">
<ul>
  <li>Python &gt;= 3.9 and &lt; 3.12 must be installed. See this <a href="https://docs.python-guide.org/starting/installation/">Python installation guide</a>.</li>
</ul>

</li>
        
            <li class="tab-content-container">
<ul>
  <li>
<a href="https://developer.android.com/studio">Android Studio</a> &gt;= 2022.1.1 (Electric Eel)</li>
</ul>

</li>
        
    </ul>
</div>

<h1 id="overview--assumptions">Overview / Assumptions</h1>

<div>
    <ul class="tab tab-linked" data-tab="392318f7-cc84-4e8b-bf1b-12c7a83c3620">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="392318f7-cc84-4e8b-bf1b-12c7a83c3620">
        
            <li class="active tab-content-container">
<p>This tutorial will use <a href="https://pypi.org/project/bleak/">bleak</a> to control the OS’s Bluetooth Low Energy (BLE).</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>The Bleak BLE controller does not currently support autonomous pairing for the BlueZ backend. So if you are using
BlueZ (i.e. Ubuntu, RaspberryPi, etc.), you need to first pair the camera from the command line. One way to do this
is to use <a href="https://ubuntu.com/core/docs/bluez/reference/pairing/introduction">bluetoothctl</a>.</span>
</div>

<p>The bleak module is based on asyncio which means that its awaitable functions need to
be called from an async coroutine. In order to do this, all of the code below should be
running in an async function. We accomplish this in the tutorial scripts
by making <em>main</em> async as such:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># Put our code here
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="n">asyncio</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="nf">main</span><span class="p">())</span>
</code></pre></div></div>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>These are stripped down Python tutorials that are only meant to show the basics.
For a complete Python SDK that uses bleak as the backend as well as a
cross-platform WiFi backend to easily write Python apps that control the GoPro, see the
<a href="https://gopro.github.io/OpenGoPro/python_sdk/">Open GoPro Python SDK</a></span>
</div>

</li>
        
            <li class="tab-content-container">
<p>This tutorial will provide a set of Kotlin tutorials to demonstrate Open GoPro Functionality. The tutorials
are provided as a single Android Studio project targeted to run on an Android device.</p>

<p>The tutorials are only concerned with application-level demonstrations of the Open GoPro API and therefore
do not prioritize the following:</p>

<ul>
  <li>UI: The tutorial project only contains a minimal UI to select, implement, and view logs for each tutorial</li>
  <li>Android architecture / best practices: the project architecture is designed to encapsulate Kotlin functionality
to easily display per-tutorial functionality</li>
  <li>Android-specific requirements: permission handling, adapter enabling, etc are implemented in the project but not
documented in the tutorials</li>
  <li>BLE / Wifi (HTTP) functionality: A simple BLE API is included in the project and will be touched upon in the tutorials.
However, the focus of the tutorials is not on how the BLE API is implemented as a real project would likely
use a third-party library for this such as <a href="https://github.com/JuulLabs/kable">Kable</a>
    <ul>
      <li>See the <a href="https://punchthrough.com/android-ble-guide/">Punchthrough tutorials</a> for Android BLE-Specific tutorials</li>
    </ul>
  </li>
</ul>

<p>These tutorials assume familiarity and a base level of competence with:</p>

<ul>
  <li><a href="https://developer.android.com/studio">Android Studio</a></li>
  <li><a href="https://www.bluetooth.com/bluetooth-resources/intro-to-bluetooth-low-energy/">Bluetooth Low Energy</a></li>
  <li><a href="https://www.w3schools.com/js/js_json_intro.asp">JSON</a></li>
  <li><a href="https://www.tutorialspoint.com/http/index.htm">HTTP</a></li>
</ul>

</li>
        
    </ul>
</div>

<h1 id="setup">Setup</h1>

<div>
    <ul class="tab tab-linked" data-tab="908581b0-6a8e-434a-9b70-9b6a1ae536ca">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="908581b0-6a8e-434a-9b70-9b6a1ae536ca">
        
            <li class="active tab-content-container">
<p>This set of tutorials is accompanied by a Python package consisting of scripts separated by tutorial module.
These can be found on <a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/">Github</a>. Once the
Github repo has been cloned or downloaded to your
local machine, the package can be installed as follows:</p>

<ol>
  <li>Enter the python tutorials directory at <code class="language-plaintext highlighter-rouge">$INSTALL/demos/python/tutorial/</code> where $INSTALL is the top level of the Open GoPro repo
where it exists on your local machine</li>
  <li>Use pip to install the package (in editable mode in case you want to test out some changes):</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install -e .
</code></pre></div></div>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>While it is out of the scope of this tutorial to describe, it is recommended to install the package in to a
<a href="https://realpython.com/python-virtual-environments-a-primer/#why-do-you-need-virtual-environments">virtual environment</a>
in order to isolate system dependencies.</span>
</div>

<p>You can test that installation was successful by viewing the installed package’s information:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>pip show open-gopro-python-tutorials
<span class="go">Name: open-gopro-python-tutorials
Version: 0.0.3
Summary: Open GoPro Python Tutorials
Home-page: https://github.com/gopro/OpenGoPro
Author: Tim Camise
Author-email: gopro.com
License: MIT
Location: c:\users\tim\gopro\opengopro\demos\python\tutorial
Requires: bleak, requests
Required-by:
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>This set of tutorials is accompanied by an Android Studio project consisting of, among other project infrastructure,
Kotlin files separated by tutorial module.
The project can be found on <a href="https://github.com/gopro/OpenGoPro/tree/main/demos/kotlin/tutorial/">Github</a>. Once the
Github repo has been cloned or downloaded to your local machine, open the project in Android studio.</p>

<p>At this point you should be able to build and load the project to your Android device.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>The project will not work on an emulated device since BLE can not be emulated.</span>
</div>
</li>
        
    </ul>
</div>

<h2 id="just-show-me-the-demo">Just Show me the Demo!!</h2>

<div>
    <ul class="tab tab-linked" data-tab="7b0e15b6-176f-495a-948b-dc24487e35b6">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="7b0e15b6-176f-495a-948b-dc24487e35b6">
        
            <li class="active tab-content-container">
<p>Each of the scripts for this tutorial can be found in the Tutorial 1
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/tutorial_modules/tutorial_1_connect_ble">directory</a>.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>Python &gt;= 3.9 and &lt; 3.12 must be used as specified in the requirements</span>
</div>

<p>You can test connecting to your camera through BLE using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">python ble_connect.py
</span></code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python ble_connect.py <span class="nt">--help</span>
<span class="go">usage: ble_connect.py [-h] [-i IDENTIFIER]

Connect to a GoPro camera, pair, then enable notifications.

optional arguments:
  -h, --help            show this help message and exit
  -i IDENTIFIER, --identifier IDENTIFIER
                        Last 4 digits of GoPro serial number, which is the last 4 digits of the default camera
                        SSID. If not used, first discovered GoPro will be connected to
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>The Kotlin file for this tutorial can be found on
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/kotlin/tutorial/app/src/main/java/com/example/open_gopro_tutorial/tutorials/Tutorial1ConnectBle.kt">Github</a>.</p>

<p>To perform the tutorial, run the Android Studio project, select “Tutorial 1” from the dropdown and click on “Perform.”</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/kotlin/tutorial_1.png" alt="kotlin_tutorial_1" style="
            width: 40%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Perform Tutorial 1

        </figcaption></figure>

<p>This will start the tutorial and log to the screen as it executes. When the tutorial is complete, click
“Exit Tutorial” to return to the Tutorial selection screen.</p>
</li>
        
    </ul>
</div>

<h1 id="basic-ble-tutorial">Basic BLE Tutorial</h1>

<p>This tutorial will walk through the process of connecting to a GoPro via BLE. This same connect functionality
will be used as a foundation for all future BLE tutorials.</p>

<p>Here is a summary of the sequence that will be described in detail in the following
sections:</p>

<svg class="mermaid" id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 594.5px;" viewbox="-50 -10 594.5 826" role="graphics-document document" aria-roledescription="sequence" xmlns:xlink="http://www.w3.org/1999/xlink"><style xmlns="http://www.w3.org/1999/xhtml">@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css");</style>
<g><rect x="344.5" y="740" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoPro" rx="3" ry="3" class="actor actor-bottom"></rect><text x="419.5" y="772.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="419.5" dy="0">GoPro</tspan></text></g><g><rect x="0" y="740" fill="#eaeaea" stroke="#666" width="177" height="65" name="PC" rx="3" ry="3" class="actor actor-bottom"></rect><text x="88.5" y="772.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="88.5" dy="0">Open GoPro user device</tspan></text></g><g><line id="actor1" x1="419.5" y1="5" x2="419.5" y2="740" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-1"><rect x="344.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoPro" rx="3" ry="3" class="actor actor-top"></rect><text x="419.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="419.5" dy="0">GoPro</tspan></text></g></g><g><line id="actor0" x1="88.5" y1="5" x2="88.5" y2="740" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="177" height="65" name="PC" rx="3" ry="3" class="actor actor-top"></rect><text x="88.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="88.5" dy="0">Open GoPro user device</tspan></text></g></g><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:2px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-svg .actor-line{stroke:grey;}#mermaid-svg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg .sequenceNumber{fill:white;}#mermaid-svg #sequencenumber{fill:#333;}#mermaid-svg #crosshead path{fill:#333;stroke:#333;}#mermaid-svg .messageText{fill:#333;stroke:none;}#mermaid-svg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg .labelText,#mermaid-svg .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .loopText,#mermaid-svg .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-svg .noteText,#mermaid-svg .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg .actorPopupMenu{position:absolute;}#mermaid-svg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-svg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg .actor-man circle,#mermaid-svg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"></path></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"></path></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"></path></symbol></defs><defs><marker id="arrowhead" refx="7.9" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerwidth="15" markerheight="8" orient="auto" refx="4" refy="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refx="15.5" refy="7" markerwidth="20" markerheight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refx="15" refy="15" markerwidth="60" markerheight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><g><rect x="0" y="167" fill="#EDF2AE" stroke="#666" width="177" height="39" rx="0" ry="0" class="note"></rect><text x="89" y="172" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="89">Scanning</tspan></text></g><g><rect x="63.5" y="260" fill="#EDF2AE" stroke="#666" width="381" height="39" rx="0" ry="0" class="note"></rect><text x="254" y="265" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Connected</tspan></text></g><g><line x1="77.5" y1="309" x2="430.5" y2="309" class="loopLine"></line><line x1="430.5" y1="309" x2="430.5" y2="446" class="loopLine"></line><line x1="77.5" y1="446" x2="430.5" y2="446" class="loopLine"></line><line x1="77.5" y1="309" x2="77.5" y2="446" class="loopLine"></line><line x1="77.5" y1="451" x2="430.5" y2="451" class="loopLine" style="stroke-dasharray: 3, 3;"></line><polygon points="77.5,309 127.5,309 127.5,322 119.1,329 77.5,329" class="labelBox"></polygon><text x="103" y="322" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-size: 16px; font-weight: 400;">alt</text><text x="279" y="327" text-anchor="middle" class="loopText" style="font-size: 16px; font-weight: 400;"><tspan x="279">[If not Previously Paired]</tspan></text></g><g><rect x="63.5" y="456" fill="#EDF2AE" stroke="#666" width="381" height="39" rx="0" ry="0" class="note"></rect><text x="254" y="461" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Paired</tspan></text></g><g><rect x="63.5" y="681" fill="#EDF2AE" stroke="#666" width="381" height="39" rx="0" ry="0" class="note"></rect><text x="254" y="686" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Ready to Communicate</tspan></text></g><text x="256" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Advertising</text><line x1="418.5" y1="111" x2="92.5" y2="111" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="256" y="126" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Advertising</text><line x1="418.5" y1="157" x2="92.5" y2="157" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="253" y="221" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Connect</text><line x1="89.5" y1="250" x2="415.5" y2="250" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="359" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Pair Request</text><line x1="89.5" y1="390" x2="415.5" y2="390" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="256" y="405" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Pair Response</text><line x1="418.5" y1="436" x2="92.5" y2="436" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="510" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic 1</text><line x1="89.5" y1="539" x2="415.5" y2="539" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="554" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic 2</text><line x1="89.5" y1="583" x2="415.5" y2="583" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="598" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic ..</text><line x1="89.5" y1="627" x2="415.5" y2="627" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="642" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic N</text><line x1="89.5" y1="671" x2="415.5" y2="671" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line></svg>

<h2 id="advertise">Advertise</h2>

<p>First, we need to ensure the camera is discoverable (i.e. it is advertising).
Follow the per-camera steps <a href="https://community.gopro.com/s/article/GoPro-Quik-How-To-Pair-Your-Camera?language=en_US">here</a>.</p>

<p>The screen should appear as such:</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/quik.png" alt="Quik" style="
            width: 50%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Camera is discoverable.

        </figcaption></figure>

<h2 id="scan">Scan</h2>

<p>Next, we must scan to discover the advertising GoPro Camera.</p>
<div>
    <ul class="tab tab-linked" data-tab="e3c05d46-61be-412b-a343-5b013aec014f">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="e3c05d46-61be-412b-a343-5b013aec014f">
        
            <li class="active tab-content-container">
<p>We will do this using bleak. Let’s initialize an empty dict that will store discovered devices, indexed by name:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Map of devices indexed by name
</span><span class="n">devices</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BleakDevice</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></div>

<p>We’re then going to scan for all devices.
We are passing a scan callback to bleak in order to also find non-connectable scan responses.
We are keeping any devices that have a device name.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Scan callback to also catch nonconnectable scan responses
</span><span class="k">def</span> <span class="nf">_scan_callback</span><span class="p">(</span><span class="n">device</span><span class="p">:</span> <span class="n">BleakDevice</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># Add to the dict if not unknown
</span>    <span class="k">if</span> <span class="n">device</span><span class="p">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">device</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="sh">"</span><span class="s">Unknown</span><span class="sh">"</span><span class="p">:</span>
        <span class="n">devices</span><span class="p">[</span><span class="n">device</span><span class="p">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">device</span>


<span class="c1"># Now discover and add connectable advertisements
</span><span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">BleakScanner</span><span class="p">.</span><span class="nf">discover</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">detection_callback</span><span class="o">=</span><span class="n">_scan_callback</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">device</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="sh">"</span><span class="s">Unknown</span><span class="sh">"</span> <span class="ow">and</span> <span class="n">device</span><span class="p">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">devices</span><span class="p">[</span><span class="n">device</span><span class="p">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">device</span>
</code></pre></div></div>

<p>Now we can search through the discovered devices to see if we found a GoPro. Any GoPro
device name will be structured as <code class="language-plaintext highlighter-rouge">GoPro XXXX</code> where XXXX is the last four digits of
your camera’s serial number.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>If you have renamed your GoPro to something other than the default, you will need to update the below
steps accordingly.</span>
</div>

<p>First, we define a regex which is either “GoPro “ followed by any four alphanumeric characters if no identifier was passed,
or the identifier if it exists. In the demo <code class="language-plaintext highlighter-rouge">ble_connect.py</code>, the identifier is taken from the command-line arguments.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">token</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">compile</span><span class="p">(</span><span class="n">identifier</span> <span class="ow">or</span> <span class="sa">r</span><span class="sh">"</span><span class="s">GoPro [A-Z0-9]{4}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>Now we build a list of matched devices by checking if each device’s name includes the token regex.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">matched_devices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">BleakDevice</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Now look for our matching device(s)
</span><span class="n">matched_devices</span> <span class="o">=</span> <span class="p">[</span><span class="n">device</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="p">.</span><span class="nf">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">token</span><span class="p">.</span><span class="nf">match</span><span class="p">(</span><span class="n">name</span><span class="p">)]</span>
</code></pre></div></div>

<p>Due to potential RF interference and the asynchronous nature of BLE advertising / scanning, it is possible that
the advertising GoPro will not be discovered by the scanning PC in one scan. Therefore, you may need to redo
the scan (as <code class="language-plaintext highlighter-rouge">ble_connect.py</code> does) until a GoPro is found. That is, <code class="language-plaintext highlighter-rouge">matched_device</code> must contain at least one
device.</p>

<p>Similarly, connection establishment can fail for reasons out of our control. Therefore, the connection process
is also wrapped in retry logic.</p>

<p>Here is an example of the log from <code class="language-plaintext highlighter-rouge">ble_connect.py</code> of scanning for devices. Note that this
includes several rescans until the devices was found.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python ble_connect.py
<span class="go">INFO:root:Scanning for bluetooth devices...
INFO:root:      Discovered:
INFO:root:      Discovered: TR8600 seri
INFO:root:Found 0 matching devices.
INFO:root:      Discovered:
INFO:root:      Discovered: TR8600 seri
INFO:root:      Discovered: GoPro Cam
INFO:root:      Discovered: GoPro 0456
INFO:root:Found 1 matching devices.
</span></code></pre></div></div>

<p>Among other devices, you should see <code class="language-plaintext highlighter-rouge">GoPro XXXX</code> where XXXX is the last four digits of
your camera’s serial number.</p>

</li>
        
            <li class="tab-content-container">
<p>First let’s define a filter that will be used to find GoPro device advertisements. We do this by filtering on the GoPro
Service UUID that is included in all GoPro advertisements:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="kd">val</span> <span class="py">scanFilters</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">&lt;</span><span class="nc">ScanFilter</span><span class="p">&gt;(</span>
    <span class="nc">ScanFilter</span><span class="p">.</span><span class="nc">Builder</span><span class="p">().</span><span class="nf">setServiceUuid</span><span class="p">(</span><span class="nc">ParcelUuid</span><span class="p">.</span><span class="nf">fromString</span><span class="p">(</span><span class="nc">GOPRO_UUID</span><span class="p">)).</span><span class="nf">build</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div></div>

<p>We then send this to the BLE API and collect events from the SharedFlow that it returns. We take the first
event emitted from this SharedFlow and notify (via a Channel) that a GoPro advertiser has been found, store
the GoPro’s BLE address, and stop the scan.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">startScan</span><span class="p">(</span><span class="n">scanFilters</span><span class="p">).</span><span class="nf">onSuccess</span> <span class="p">{</span> <span class="n">scanResults</span> <span class="p">-&gt;</span>
    <span class="kd">val</span> <span class="py">deviceChannel</span><span class="p">:</span> <span class="nc">Channel</span><span class="p">&lt;</span><span class="nc">BluetoothDevice</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nc">Channel</span><span class="p">()</span>
    <span class="c1">// Collect scan results</span>
    <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">IO</span><span class="p">).</span><span class="nf">launch</span> <span class="p">{</span>
        <span class="n">scanResults</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">scanResult</span> <span class="p">-&gt;</span>
            <span class="c1">// We will take the first discovered gopro</span>
            <span class="n">deviceChannel</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">scanResult</span><span class="p">.</span><span class="n">device</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Wait to receive the scan result</span>
    <span class="n">goproAddress</span> <span class="p">=</span> <span class="n">deviceChannel</span><span class="p">.</span><span class="nf">receive</span><span class="p">().</span><span class="n">address</span>
    <span class="n">ble</span><span class="p">.</span><span class="nf">stopScan</span><span class="p">(</span><span class="n">scanResults</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>At this point, the GoPro’s BLE address is stored (as a string) in <code class="language-plaintext highlighter-rouge">goproAddress</code>.</p>

<p>Here is an example log output from this process:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Scanning for GoPro's
Received scan result: GoPro 0992
Found GoPro: GoPro 0992
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<h2 id="connect">Connect</h2>

<p>Now that we have discovered at least one GoPro device to connect to, the next step is to
establish a BLE connection to the camera.</p>

<div>
    <ul class="tab tab-linked" data-tab="153a80d1-5d43-44b6-834d-741823c02325">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="153a80d1-5d43-44b6-834d-741823c02325">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># We're just taking the first device if there are multiple.
</span><span class="n">device</span> <span class="o">=</span> <span class="n">matched_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">client</span> <span class="o">=</span> <span class="nc">BleakClient</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</code></pre></div></div>

<p>An example output of this is shown here where we can see that the connection has successfully been established
as well as the GoPro’s BLE MAC address.:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Establishing BLE connection to EF:5A:F6:13:E6:5A: GoPro 0456...
INFO:bleak.backends.dotnet.client:Services resolved for BleakClientDotNet (EF:5A:F6:13:E6:5A)
INFO:root:BLE Connected!
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>At this point, the BLE connection is established but there is more setup to be done before we are ready to
communicate.</p>

<h2 id="pair">Pair</h2>

<p>The GoPro has encryption-protected characteristics which require us to pair before
writing to them. Therefore now that we are connected, we need to attempt to pair.</p>

<div>
    <ul class="tab tab-linked" data-tab="355363a2-b1ce-4045-9328-14229e61f735">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="355363a2-b1ce-4045-9328-14229e61f735">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">pair</span><span class="p">()</span>
<span class="k">except</span> <span class="nb">NotImplementedError</span><span class="p">:</span>
    <span class="c1"># This is expected on Mac
</span>    <span class="k">pass</span>
</code></pre></div></div>

<p>Not all OS’s allow pairing (at this time) but some require it. Rather than checking for the OS, we are just
catching the exception when it fails.</p>

</li>
        
            <li class="tab-content-container">
<p>Rather than explicitly request pairing, we rely on the fact that Android will automatically start the pairing
process if you try to read a characteristic that requires encryption. To do this, we read the
<a href="/OpenGoPro/ble/protocol/ble_setup.html#ble-characteristics">Wifi AP Password characteristic</a>.</p>

<p>First we discover all characteristics (this will also be needed later when enabling notifications):</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">discoverCharacteristics</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">)</span>
</code></pre></div></div>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>This API will discover the characteristics over-the-air but not return them here. They are stored to the <code class="language-plaintext highlighter-rouge">ble</code> object
for later access via the <code class="language-plaintext highlighter-rouge">servicesOf</code> method.</span>
</div>

<p>Then we read the relevant characteristic to trigger pairing:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">readCharacteristic</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">,</span> <span class="nc">GoProUUID</span><span class="p">.</span><span class="nc">WIFI_AP_PASSWORD</span><span class="p">.</span><span class="n">uuid</span><span class="p">)</span>
</code></pre></div></div>

<p>At this point a pairing popup should occur on the Android Device. Select “Allow Pairing” to continue.</p>

<p>Here is an example log output from this process:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Discovering characteristics
Discovered 9 services for F7:5B:5D:81:64:1B
Service 00001801-0000-1000-8000-00805f9b34fb
Characteristics:
|--
Service 00001800-0000-1000-8000-00805f9b34fb
Characteristics:
|--00002a00-0000-1000-8000-00805f9b34fb: READABLE
|--00002a01-0000-1000-8000-00805f9b34fb: READABLE
|--00002a04-0000-1000-8000-00805f9b34fb: READABLE
</span><span class="c">...
</span><span class="go">|------00002902-0000-1000-8000-00805f9b34fb: EMPTY
|--b5f90082-aa8d-11e3-9046-0002a5d5c51b: WRITABLE
|--b5f90083-aa8d-11e3-9046-0002a5d5c51b: NOTIFIABLE
|------00002902-0000-1000-8000-00805f9b34fb: EMPTY
|--b5f90084-aa8d-11e3-9046-0002a5d5c51b: NOTIFIABLE
|------00002902-0000-1000-8000-00805f9b34fb: EMPTY
Service 00001804-0000-1000-8000-00805f9b34fb
Characteristics:
|--00002a07-0000-1000-8000-00805f9b34fb: READABLE
Pairing
Read characteristic b5f90003-aa8d-11e3-9046-0002a5d5c51b : value: 66:3F:54:2D:38:35:72:2D:4E:35:63
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Once paired, the camera should beep and display “Connection Successful”.</p>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>This pairing process only needs to be done once. On subsequent connections, the devices will automatically
re-establish encryption using stored keys. That is, they are “bonded.”</span>
</div>

<h2 id="enable-notifications">Enable Notifications</h2>

<p>As specified in the Open GoPRo BLE Spec, we must
<a href="/OpenGoPro/ble/protocol/ble_setup.html#configure-gatt-characteristics">enable notifications</a> for a given
characteristic to receive responses from it.</p>

<p>To enable notifications, we loop over each characteristic in each service and enable the characteristic
for notification if it has <code class="language-plaintext highlighter-rouge">notify</code> properties:</p>

<div>
    <ul class="tab tab-linked" data-tab="4c06edab-879d-4505-82c2-4b2e92e54d3c">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="4c06edab-879d-4505-82c2-4b2e92e54d3c">
        
            <li class="active tab-content-container">
<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>It is necessary to define a notification handler to pass to the bleak <code class="language-plaintext highlighter-rouge">start_notify</code> method. Since we
only care about connecting to the device in this tutorial (and not actually receiving data), we are just passing
an empty function. A future tutorial will demonstrate how to use this meaningfully.</span>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="n">client</span><span class="p">.</span><span class="n">services</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">service</span><span class="p">.</span><span class="n">characteristics</span><span class="p">:</span>
        <span class="k">if</span> <span class="sh">"</span><span class="s">notify</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">char</span><span class="p">.</span><span class="n">properties</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">start_notify</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">notification_handler</span><span class="p">)</span>
</code></pre></div></div>

<p>In the following example output, we can see that notifications are enabled for each characteristic that is
notifiable.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Enabling notifications...
INFO:root:Enabling notification on char 00002a19-0000-1000-8000-00805f9b34fb
INFO:root:Enabling notification on char b5f90073-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90075-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90077-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90079-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90092-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90081-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90083-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Enabling notification on char b5f90084-aa8d-11e3-9046-0002a5d5c51b
INFO:root:Done enabling notifications
INFO:root:BLE Connection is ready for communication.
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">servicesOf</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">).</span><span class="nf">onSuccess</span> <span class="p">{</span> <span class="n">services</span> <span class="p">-&gt;</span>
    <span class="n">services</span><span class="p">.</span><span class="nf">forEach</span> <span class="p">{</span> <span class="n">service</span> <span class="p">-&gt;</span>
        <span class="n">service</span><span class="p">.</span><span class="n">characteristics</span><span class="p">.</span><span class="nf">forEach</span> <span class="p">{</span> <span class="n">char</span> <span class="p">-&gt;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">char</span><span class="p">.</span><span class="nf">isNotifiable</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">ble</span><span class="p">.</span><span class="nf">enableNotification</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">,</span> <span class="n">char</span><span class="p">.</span><span class="n">uuid</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here is an example log output from this process:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Enabling notifications
Enabling notifications for 00002a19-0000-1000-8000-00805f9b34fb
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90073-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90075-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90077-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90079-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90092-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90081-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90083-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Enabling notifications for b5f90084-aa8d-11e3-9046-0002a5d5c51b
Wrote to descriptor 00002902-0000-1000-8000-00805f9b34fb
Bluetooth is ready for communication!
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>The characteristics that correspond to each UUID listed in the log can be found in the
<a href="/OpenGoPro/ble/protocol/ble_setup.html#ble-characteristics">Open GoPro API</a>. These
will be used in a future tutorial to send data.</p>

<p>Once the notifications are enabled, the GoPro BLE initialization is complete and it is ready to communicate via
BLE.</p>

<p><strong>Quiz time! 📚 ✏️</strong></p>

<div id="quiz_ce8e2db9-59c7-4ed1-ac81-891465603b97" class="quiz">
    <div>
        <div id="question_ce8e2db9-59c7-4ed1-ac81-891465603b97" class="quiz__question">How often is it necessary to pair?</div>
        <div id="answers_ce8e2db9-59c7-4ed1-ac81-891465603b97">
        
            <input type="radio" name="question" value="A"><label>A: Pairing must occur every time to ensure safe BLE communication.</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: We never need to pair as the GoPro does not require it to communicate.</label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: Pairing only needs to occur once as the keys will be automatically re-used for future connections.</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('ce8e2db9-59c7-4ed1-ac81-891465603b97', 'C')">Submit Answer</button>
    <div id="results_ce8e2db9-59c7-4ed1-ac81-891465603b97" style="display: none">
        <span id="correct_ce8e2db9-59c7-4ed1-ac81-891465603b97" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_ce8e2db9-59c7-4ed1-ac81-891465603b97" style="display: none"> Incorrect!! 😭 The correct answer is C.</span>
        Pairing is only needed once (assuming neither side deletes the keys). If the
    GoPro deletes the keys (via Connections-&gt;Reset Connections), the devices will need to re-pair.
    </div>
</div>

<h1 id="troubleshooting">Troubleshooting</h1>

<h2 id="device-not-connecting">Device not connecting</h2>

<p>If the connection is not starting, it is likely because the camera is not advertising. This can be due to either:</p>

<ol>
  <li>The camera is not in pairing mode. Ensure that this is achieved as done in
<a href="/OpenGoPro/tutorials/connect-ble#advertise">the advertise section</a>.</li>
  <li>The devices never disconnected from the previous session so are thus already connected. If this is the case,
perform the “Complete System Reset” shown below.</li>
</ol>

<h2 id="complete-system-reset">Complete System Reset</h2>

<p>BLE is a fickle beast. If at any point it is impossible to discover or connect to the camera,
perform the following.</p>

<ol>
  <li>Reset the camera by choosing Connections –&gt; Reset Connections</li>
  <li>Use your OS’s bluetooth settings GUI to remove / unpair the Gopro</li>
  <li>Restart the procedure detailed above</li>
</ol>

<h2 id="logs">Logs</h2>

<div>
    <ul class="tab tab-linked" data-tab="1ee340d1-0b32-462e-966c-88d76b985d49">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="1ee340d1-0b32-462e-966c-88d76b985d49">
        
            <li class="active tab-content-container">
<p>The demo program has enabled bleak logs and is also using the default
<a href="https://docs.python.org/3/library/logging.html">python logging module</a> to write its own logs.</p>

<p>To enable more bleak logs, follow bleak’s
<a href="https://bleak.readthedocs.io/en/latest/troubleshooting.html#enable-logging">troubleshooting section</a>.</p>

</li>
        
            <li class="tab-content-container">
<p>The demo program is using <a href="https://github.com/JakeWharton/timber">Timber</a>. It is piping all log messages
to the UI but they are also available in the <a href="https://developer.android.com/studio/debug/logcat">logcat</a> window
and can be filtered using: <code class="language-plaintext highlighter-rouge">package:mine  tag:GP_</code>.</p>

</li>
        
    </ul>
</div>

<h1 id="good-job">Good Job!</h1>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>Congratulations 🤙</span>
</div>

<p>You can now successfully connect to the GoPro via BLE and prepare it to receive / send data. To see how
to send commands, you should advance to the next tutorial.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-07-01T14:47:28-07:00">July 1, 2024</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      <a href="/OpenGoPro/tutorials/send-ble-commands" class="pagination--pager" title="Tutorial 2: Send BLE TLV Commands
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
        
        <li><strong>Follow:</strong></li>
           
        <li>
            <a href="https://www.gopro.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i>
                Website</a>
        </li>
          
        <li>
            <a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>
                Twitter</a>
        </li>
          
        <li>
            <a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i>
                Facebook</a>
        </li>
          
        <li>
            <a href="https://github.com/gopro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i>
                GitHub</a>
        </li>
          
        <li>
            <a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i>
                Instagram</a>
        </li>
           
    </ul>
</div>

<div class="page__footer-copyright">
    © 2024 GoPro. Powered by
    <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp;
    <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.
    <p>
        Can be used with GoPro® HERO9 and HERO10 cameras. You must include the following text on
        every page where it can be seen by someone purchasing such an item: <em>"This product
        and/or service is not affiliated with, endorsed by or in any way associated with
        GoPro Inc. or its products and services. GoPro, HERO, and their respective logos
        are trademarks or registered trademarks of GoPro, Inc."</em>
    </p>
</div>

      </footer>
    </div>

    
  <script src="/OpenGoPro/assets/js/main.min.js"></script>




<script src="/OpenGoPro/assets/js/lunr/lunr.min.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-store.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
