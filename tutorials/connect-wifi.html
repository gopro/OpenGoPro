<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html lang="en-US" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Tutorial 6: Connect WiFi :  Open GoPro</title>
<meta name="description" content="This document will provide a walk-through tutorial to use the Open GoPro Interface to connect the GoPro to a Wifi network either in Access Point (AP) mode or Station (STA) Mode.">


  <meta name="author" content="GoPro">
  
  <meta property="article:author" content="GoPro">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Open GoPro">
<meta property="og:title" content="Tutorial 6: Connect WiFi">
<meta property="og:url" content="https://gopro.github.io/OpenGoPro/tutorials/connect-wifi">


  <meta property="og:description" content="This document will provide a walk-through tutorial to use the Open GoPro Interface to connect the GoPro to a Wifi network either in Access Point (AP) mode or Station (STA) Mode.">







  <meta property="article:published_time" content="2024-10-04T10:01:45-07:00">






<link rel="canonical" href="https://gopro.github.io/OpenGoPro/tutorials/connect-wifi">












<!-- end _includes/seo.html -->


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/OpenGoPro/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>


  
    <script src="/OpenGoPro/assets/js/tabs.js"></script>
  
    <script src="/OpenGoPro/assets/js/quiz.js"></script>
  
    <script src="/OpenGoPro/assets/js/accordion.js"></script>
  


    <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
    // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function (event) {
        var manualAnchors = new AnchorJS();
        manualAnchors.options = {
            titleText: 'Permalink',
            placement: 'left'
        };
        manualAnchors.add('.anchored');
    });
</script>
<link rel="apple-touch-icon" sizes="180x180" href="/OpenGoPro/assets/images/logos/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/OpenGoPro/assets/images/logos/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/OpenGoPro/assets/images/logos/favicon-16x16.png">
<link rel="manifest" href="/OpenGoPro/assets/images/logos/site.webmanifest">
<link rel="mask-icon" href="/OpenGoPro/assets/images/logos/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/OpenGoPro/assets/images/logos/favicon.ico">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-config" content="/assets/images/logos/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/OpenGoPro/"><img src="/OpenGoPro/assets/images/logos/logo.png" alt="Open GoPro"></a>
        
        <a class="site-title" href="/OpenGoPro/">
          Open GoPro
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/OpenGoPro/">Home</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/ble/">BLE Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/http">HTTP Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/tutorials">Tutorials</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://github.com/gopro/OpenGoPro/tree/main/demos">Demos</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/faq">FAQ</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1">
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/tutorials" itemprop="item"><span itemprop="name">Tutorials</span></a>
          <meta itemprop="position" content="2">
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Tutorial 6: Connect WiFi</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://gopro.github.io/OpenGoPro/">
        <img src="/OpenGoPro/assets/images/logos/logo_square.png" alt="GoPro" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://gopro.github.io/OpenGoPro/" itemprop="url">GoPro</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Be a <strong>hero</strong>.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">US</span>
        </li>
      

      
        
          
            <li><a href="https://www.gopro.com" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/gopro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox">
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-ble"><span class="nav__sub-title">1: Connect BLE</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-ble-commands"><span class="nav__sub-title">2: Send BLE Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/parse-ble-responses"><span class="nav__sub-title">3: Parse BLE TLV Responses</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-queries"><span class="nav__sub-title">4: BLE Queries</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-protobuf"><span class="nav__sub-title">5: BLE Protobuf</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-wifi"><span class="nav__sub-title">6: Connect WiFi</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-wifi-commands"><span class="nav__sub-title">7: Send WiFi Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/camera-media-list"><span class="nav__sub-title">8: Camera Media List</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/cohn"><span class="nav__sub-title">9: Camera on the Home Network</span></a>
          

          
        </li>
      
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Tutorial 6: Connect WiFi">
    <meta itemprop="description" content="This document will provide a walk-through tutorial to use the Open GoPro Interface to connect the GoPro to a Wifinetwork either in Access Point (AP) mode or Station (STA) Mode.">
    <meta itemprop="datePublished" content="2024-10-04T10:01:45-07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://gopro.github.io/OpenGoPro/tutorials/connect-wifi" itemprop="url">Tutorial 6: Connect WiFi
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          13 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#just-show-me-the-demos">Just Show me the Demo(s)!!</a></li>
<li><a href="#setup">Setup</a></li>
<li>
<a href="#access-point-mode-ap">Access Point Mode (AP)</a><ul>
<li>
<a href="#find-wifi-information">Find WiFi Information</a><ul>
<li><a href="#get-wifi-ssid">Get WiFi SSID</a></li>
<li><a href="#get-wifi-password">Get WiFi Password</a></li>
</ul>
</li>
<li><a href="#enable-wifi-ap">Enable WiFi AP</a></li>
<li><a href="#establish-connection-to-wifi-ap">Establish Connection to WiFi AP</a></li>
</ul>
</li>
<li>
<a href="#station-sta-mode">Station (STA) Mode</a><ul>
<li><a href="#scan-for-networks">Scan for Networks</a></li>
<li>
<a href="#connect-to-network">Connect to Network</a><ul>
<li><a href="#gatt-write-fragmentation">GATT Write Fragmentation</a></li>
<li><a href="#connect-example">Connect Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#good-job">Good Job!</a></li>
</ul>
            </nav>
          </aside>
        
        <p>This document will provide a walk-through tutorial to use the Open GoPro Interface to connect the GoPro to a Wifi
network either in Access Point (AP) mode or Station (STA) Mode.</p>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>It is recommended that you have first completed the
<a href="/OpenGoPro/tutorials/connect-ble">connecting BLE</a>,
<a href="/OpenGoPro/tutorials/send-ble-commands">sending commands</a>,
<a href="/OpenGoPro/tutorials/parse-ble-responses">parsing responses</a>, and
<a href="/OpenGoPro/tutorials/ble-protobuf">protobuf</a> tutorials before proceeding.</span>
</div>

<h1 id="requirements">Requirements</h1>

<p>It is assumed that the hardware and software requirements from the
<a href="/OpenGoPro/tutorials/connect-ble#requirements">connecting BLE tutorial</a>
are present and configured correctly.</p>

<p>The scripts that will be used for this tutorial can be found in the
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/tutorial_modules/tutorial_6_connect_wifi">Tutorial 6 Folder</a>.</p>

<h1 id="just-show-me-the-demos">Just Show me the Demo(s)!!</h1>

<div>
    <ul class="tab tab-linked" data-tab="f51ae387-2740-4c82-8a3c-f7c092c7ae4d">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="f51ae387-2740-4c82-8a3c-f7c092c7ae4d">
        
            <li class="active tab-content-container">
<p>Each of the scripts for this tutorial can be found in the Tutorial 6
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/tutorial_modules/tutorial_6_connect_wifi/">directory</a>.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>Python &gt;= 3.9 and &lt; 3.12 must be used as specified in the requirements</span>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Enable WiFi AP<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can enable the GoPro’s Access Point to allow it accept Wifi connections as an Access Point via:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_enable.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_enable.py <span class="nt">--help</span>
<span class="go">usage: enable_wifi_ap.py [-h] [-i IDENTIFIER] [-t TIMEOUT]

Connect to a GoPro camera via BLE, get its WiFi Access Point (AP) info, and enable its AP.

options:
  -h, --help            show this help message and exit
  -i IDENTIFIER, --identifier IDENTIFIER
                        Last 4 digits of GoPro serial number, which is the last 4 digits of the default camera SSID. If not used, first
                        discovered GoPro will be connected to
  -t TIMEOUT, --timeout TIMEOUT
                        time in seconds to maintain connection before disconnecting. If not set, will maintain connection indefinitely
</span></code></pre></div></div>

</div>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Connect GoPro as STA<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can connect the GoPro to a Wifi network where the GoPro is in Station Mode (STA) via:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python connect_as_sta.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python connect_as_sta.py <span class="nt">--help</span>
<span class="go">Connect the GoPro to a Wifi network where the GoPro is in Station Mode (STA).

positional arguments:
  ssid                  SSID of network to connect to
  password              Password of network to connect to

options:
  -h, --help            show this help message and exit
  -i IDENTIFIER, --identifier IDENTIFIER
                        Last 4 digits of GoPro serial number, which is the last 4 digits of the default camera SSID.
                        If not used, first discovered GoPro will be connected to
</span></code></pre></div></div>

</div>
</div>

</li>
        
            <li class="tab-content-container">
<p>The Kotlin file for this tutorial can be found on
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/kotlin/tutorial/app/src/main/java/com/example/open_gopro_tutorial/tutorials/Tutorial5ConnectWifi.kt">Github</a>.</p>

<p>To perform the tutorial, run the Android Studio project, select “Tutorial 6” from the dropdown and click on “Perform.”
This requires that a GoPro is already connected via BLE, i.e. that Tutorial 1 was already run. You can
check the BLE status at the top of the app.</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/kotlin/tutorial_5.png" alt="kotlin_connect_wifi" style="
            width: 40%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Perform Tutorial 6

        </figcaption></figure>

<p>This will start the tutorial and log to the screen as it executes. When the tutorial is complete, click
“Exit Tutorial” to return to the Tutorial selection screen.</p>

</li>
        
    </ul>
</div>

<h1 id="setup">Setup</h1>

<p>For both cases, we must first connect to BLE as was discussed in the
<a href="/OpenGoPro/tutorials/connect-ble">connecting BLE tutorial</a>.</p>

<h1 id="access-point-mode-ap">Access Point Mode (AP)</h1>

<p>In AP mode, the GoPro operates as an Access Point, allowing wireless clients to connect and communicate using the
Open GoPro <a href="/OpenGoPro/http">HTTP API</a>. The HTTP API provides much of the same functionality as the BLE API as
well as some additional functionality. For more information on the HTTP API, see the next 2 tutorials.</p>

<svg class="plantuml" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="110px" preserveaspectratio="none" style="width:401px;height:110px;background:#FFFFFF;" version="1.1" viewbox="0 0 401 110" width="401px" zoomandpan="magnify"><defs></defs><g><g id="cluster_AccessPoint"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="115" x="7" y="7"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="97" x="16" y="21.9951">AccessPoint</text></g><g id="elem_gopro"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="23" y="41.85"></rect><path d="M50.6667,41.85 L50.6667,46.85 L43.6667,53.85 L23,53.85 " fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="43" x="38" y="74.8451">GoPro</text></g><g id="elem_client"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="318" y="42.85"></rect><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="375" y="47.85"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="373" y="49.85"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="373" y="53.85"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="37" x="333" y="75.8451">client</text></g><g id="link_gopro_client"><path d="M112.43,65.1603 C168.64,65.3503 256.94,65.6591 311.54,65.8491 " fill="none" id="gopro-client" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="#181818" points="106.43,65.14,115.4164,69.1704,111.43,65.1569,115.4435,61.1704,106.43,65.14" style="stroke:#181818;stroke-width:1.0;"></polygon><polygon fill="#181818" points="317.54,65.87,308.554,61.8387,312.54,65.8526,308.5261,69.8387,317.54,65.87" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="24" x="201" y="62.0669">BLE</text></g><g id="link_gopro_client"><path d="M112.0141,78.9706 C144.3441,87.4406 184.97,94.92 226,91 C257.11,88.02 286.0075,82.4323 311.6775,76.6323 " fill="none" id="gopro-client-1" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="106.21,77.45,113.9024,83.6003,111.0468,78.7172,115.9299,75.8615,106.21,77.45" style="stroke:#181818;stroke-width:1.0;"></polygon><polygon fill="#181818" points="317.53,75.31,307.8697,73.3919,312.6529,76.4119,309.6328,81.1952,317.53,75.31" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="24" x="201" y="87.0669">WiFi</text></g></g></svg>

<p>In order to connect to the camera in AP mode, after connecting via BLE, pairing, and enabling notifications, we must:</p>

<ul>
  <li>find the GoPro’s WiFi AP information (SSID and password) via BLE,</li>
  <li>enable the WiFi AP via BLE</li>
  <li>connect to the WiFi AP.</li>
</ul>

<p>Here is an outline of the steps to do so:</p>

<svg class="mermaid" id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 804.5px;" viewbox="-60 -10 804.5 1152" role="graphics-document document" aria-roledescription="sequence" xmlns:xlink="http://www.w3.org/1999/xlink"><style xmlns="http://www.w3.org/1999/xhtml">@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css");</style>
<g><rect x="544.5" y="1066" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoProWiFi" rx="3" ry="3" class="actor actor-bottom"></rect><text x="619.5" y="1098.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="619.5" dy="0">GoProWiFi</tspan></text></g><g><rect x="344.5" y="1066" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoProBLE" rx="3" ry="3" class="actor actor-bottom"></rect><text x="419.5" y="1098.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="419.5" dy="0">GoProBLE</tspan></text></g><g><rect x="0" y="1066" fill="#eaeaea" stroke="#666" width="177" height="65" name="PC" rx="3" ry="3" class="actor actor-bottom"></rect><text x="88.5" y="1098.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="88.5" dy="0">Open GoPro user device</tspan></text></g><g><line id="actor2" x1="619.5" y1="5" x2="619.5" y2="1066" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="GoProWiFi"></line><g id="root-2"><rect x="544.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoProWiFi" rx="3" ry="3" class="actor actor-top"></rect><text x="619.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="619.5" dy="0">GoProWiFi</tspan></text></g></g><g><line id="actor1" x1="419.5" y1="5" x2="419.5" y2="1066" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="GoProBLE"></line><g id="root-1"><rect x="344.5" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" name="GoProBLE" rx="3" ry="3" class="actor actor-top"></rect><text x="419.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="419.5" dy="0">GoProBLE</tspan></text></g></g><g><line id="actor0" x1="88.5" y1="5" x2="88.5" y2="1066" class="actor-line 200" stroke-width="0.5px" stroke="#999" name="PC"></line><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="177" height="65" name="PC" rx="3" ry="3" class="actor actor-top"></rect><text x="88.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor actor-box" style="text-anchor: middle; font-size: 16px; font-weight: 400;"><tspan x="88.5" dy="0">Open GoPro user device</tspan></text></g></g><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:1px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg p{margin:0;}#mermaid-svg .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-svg .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg .sequenceNumber{fill:white;}#mermaid-svg #sequencenumber{fill:#333;}#mermaid-svg #crosshead path{fill:#333;stroke:#333;}#mermaid-svg .messageText{fill:#333;stroke:none;}#mermaid-svg .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg .labelText,#mermaid-svg .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .loopText,#mermaid-svg .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-svg .noteText,#mermaid-svg .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-svg .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg .actorPopupMenu{position:absolute;}#mermaid-svg .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-svg .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg .actor-man circle,#mermaid-svg line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g></g><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"></path></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"></path></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"></path></symbol></defs><defs><marker id="arrowhead" refx="7.9" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto-start-reverse"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerwidth="15" markerheight="8" orient="auto" refx="4" refy="4.5"><path fill="none" stroke="#000000" stroke-width="1pt" d="M 1,2 L 6,7 M 6,2 L 1,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refx="15.5" refy="7" markerwidth="20" markerheight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refx="15" refy="15" markerwidth="60" markerheight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><g><rect x="0" y="212" fill="#EDF2AE" stroke="#666" width="177" height="39" class="note"></rect><text x="89" y="217" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="89">Scanning</tspan></text></g><g><rect x="63.5" y="305" fill="#EDF2AE" stroke="#666" width="381" height="39" class="note"></rect><text x="254" y="310" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Connected</tspan></text></g><g><line x1="77.5" y1="354" x2="430.5" y2="354" class="loopLine"></line><line x1="430.5" y1="354" x2="430.5" y2="491" class="loopLine"></line><line x1="77.5" y1="491" x2="430.5" y2="491" class="loopLine"></line><line x1="77.5" y1="354" x2="77.5" y2="491" class="loopLine"></line><line x1="77.5" y1="496" x2="430.5" y2="496" class="loopLine" style="stroke-dasharray: 3, 3;"></line><polygon points="77.5,354 127.5,354 127.5,367 119.1,374 77.5,374" class="labelBox"></polygon><text x="103" y="367" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-size: 16px; font-weight: 400;">alt</text><text x="279" y="372" text-anchor="middle" class="loopText" style="font-size: 16px; font-weight: 400;"><tspan x="279">[If not Previously Paired]</tspan></text></g><g><rect x="63.5" y="501" fill="#EDF2AE" stroke="#666" width="381" height="39" class="note"></rect><text x="254" y="506" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Paired</tspan></text></g><g><rect x="63.5" y="726" fill="#EDF2AE" stroke="#666" width="381" height="39" class="note"></rect><text x="254" y="731" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="254">Ready to Communicate</tspan></text></g><g><line x1="-10" y1="75" x2="454.5" y2="75" class="loopLine"></line><line x1="454.5" y1="75" x2="454.5" y2="775" class="loopLine"></line><line x1="-10" y1="775" x2="454.5" y2="775" class="loopLine"></line><line x1="-10" y1="75" x2="-10" y2="775" class="loopLine"></line><polygon points="-10,75 40,75 40,88 31.6,95 -10,95" class="labelBox"></polygon><text x="15" y="88" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-size: 16px; font-weight: 400;">loop</text><text x="247.25" y="93" text-anchor="middle" class="loopText" style="font-size: 16px; font-weight: 400;"><tspan x="247.25">[Steps from Connect Tutorial]</tspan></text></g><g><rect x="544.5" y="963" fill="#EDF2AE" stroke="#666" width="150" height="39" class="note"></rect><text x="620" y="968" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-size: 16px; font-weight: 400;"><tspan x="620">WiFi AP enabled</tspan></text></g><text x="256" y="125" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Advertising</text><line x1="418.5" y1="156" x2="92.5" y2="156" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="256" y="171" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Advertising</text><line x1="418.5" y1="202" x2="92.5" y2="202" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="253" y="266" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Connect</text><line x1="89.5" y1="295" x2="415.5" y2="295" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="404" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Pair Request</text><line x1="89.5" y1="435" x2="415.5" y2="435" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="256" y="450" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Pair Response</text><line x1="418.5" y1="481" x2="92.5" y2="481" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="555" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic 1</text><line x1="89.5" y1="584" x2="415.5" y2="584" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="599" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic 2</text><line x1="89.5" y1="628" x2="415.5" y2="628" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="643" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic ..</text><line x1="89.5" y1="672" x2="415.5" y2="672" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="687" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Enable Notifications on Characteristic N</text><line x1="89.5" y1="716" x2="415.5" y2="716" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="790" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Read Wifi AP SSID</text><line x1="89.5" y1="819" x2="415.5" y2="819" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="834" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Read Wifi AP Password</text><line x1="89.5" y1="863" x2="415.5" y2="863" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="253" y="878" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Write to Enable WiFi AP</text><line x1="89.5" y1="907" x2="415.5" y2="907" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="256" y="922" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Response sent as notification</text><line x1="418.5" y1="953" x2="92.5" y2="953" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="353" y="1017" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-size: 16px; font-weight: 400;">Connect to WiFi AP</text><line x1="89.5" y1="1046" x2="615.5" y2="1046" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line></svg>

<p>The following subsections will detail this process.</p>

<h2 id="find-wifi-information">Find WiFi Information</h2>

<p>First we must find the target Wifi network’s SSID and password.</p>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>The process to get this information is different than all other BLE operations described up to this point.
Whereas the previous command, setting, and query operations all followed the Write Request-Notification
Response pattern, the WiFi Information is retrieved via direct Read Requests to BLE characteristics.</span>
</div>

<h3 id="get-wifi-ssid">Get WiFi SSID</h3>

<p>The WiFi SSID can be found by reading from the WiFi AP SSID
<a href="/OpenGoPro/ble/protocol/ble_setup.html#ble-characteristics">characteristic</a> of the
WiFi Access Point service.</p>

<p>Let’s send the read request to get the SSID and decode it into a string.</p>

<div>
    <ul class="tab tab-linked" data-tab="86b0592f-1ad2-4679-a0cb-62aa73db34e9">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="86b0592f-1ad2-4679-a0cb-62aa73db34e9">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ssid_uuid</span> <span class="o">=</span> <span class="n">GoProUuid</span><span class="p">.</span><span class="n">WIFI_AP_SSID_UUID</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Reading the WiFi AP SSID at </span><span class="si">{</span><span class="n">ssid_uuid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="n">ssid</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">read_gatt_char</span><span class="p">(</span><span class="n">ssid_uuid</span><span class="p">.</span><span class="n">value</span><span class="p">)).</span><span class="nf">decode</span><span class="p">()</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">SSID is </span><span class="si">{</span><span class="n">ssid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>There is no need for a synchronization event as the information is available when the <code class="language-plaintext highlighter-rouge">read_gatt_char</code> method
returns.</span>
</div>

<p>In the demo, this information is logged as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Reading the WiFi AP SSID at GoProUuid.WIFI_AP_SSID_UUID
SSID is GP24500702
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">readCharacteristic</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">,</span> <span class="nc">GoProUUID</span><span class="p">.</span><span class="nc">WIFI_AP_SSID</span><span class="p">.</span><span class="n">uuid</span><span class="p">).</span><span class="nf">onSuccess</span> <span class="p">{</span> <span class="n">ssid</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="nf">decodeToString</span><span class="p">()</span> <span class="p">}</span>
<span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"SSID is $ssid"</span><span class="p">)</span>
</code></pre></div></div>

<p>In the demo, this information is logged as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Getting the SSID
Read characteristic b5f90002-aa8d-11e3-9046-0002a5d5c51b : value: 64:65:62:75:67:68:65:72:6F:31:31
SSID is debughero11
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<h3 id="get-wifi-password">Get WiFi Password</h3>

<p>The WiFi password can be found by reading from the WiFi AP password
<a href="/OpenGoPro/ble/protocol/ble_setup.html#ble-characteristics">characteristic</a> of the
WiFi Access Point service.</p>

<p>Let’s send the read request to get the password and decode it into a string.</p>

<div>
    <ul class="tab tab-linked" data-tab="8f7d3d96-2356-4dd3-8ce4-e911f3f3dd8b">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="8f7d3d96-2356-4dd3-8ce4-e911f3f3dd8b">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">password_uuid</span> <span class="o">=</span> <span class="n">GoProUuid</span><span class="p">.</span><span class="n">WIFI_AP_PASSWORD_UUID</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Reading the WiFi AP password at </span><span class="si">{</span><span class="n">password_uuid</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="n">password</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">read_gatt_char</span><span class="p">(</span><span class="n">password_uuid</span><span class="p">.</span><span class="n">value</span><span class="p">)).</span><span class="nf">decode</span><span class="p">()</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Password is </span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>There is no need for a synchronization event as the information is available when the <code class="language-plaintext highlighter-rouge">read_gatt_char</code> method
returns.</span>
</div>

<p>In the demo, this information is logged as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Reading the WiFi AP password at GoProUuid.WIFI_AP_PASSWORD_UUID
Password is p@d-NNc-2ts
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ble</span><span class="p">.</span><span class="nf">readCharacteristic</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">,</span> <span class="nc">GoProUUID</span><span class="p">.</span><span class="nc">WIFI_AP_PASSWORD</span><span class="p">.</span><span class="n">uuid</span><span class="p">).</span><span class="nf">onSuccess</span> <span class="p">{</span> <span class="n">password</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="nf">decodeToString</span><span class="p">()</span> <span class="p">}</span>
<span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="s">"Password is $password"</span><span class="p">)</span>
</code></pre></div></div>

<p>In the demo, this information is logged as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Getting the password
Read characteristic b5f90003-aa8d-11e3-9046-0002a5d5c51b : value: 7A:33:79:2D:44:43:58:2D:50:68:6A
Password is z3y-DCX-Phj
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<h2 id="enable-wifi-ap">Enable WiFi AP</h2>

<p>Before we can connect to the WiFi AP, we have to make sure the access point is enabled. This is accomplished via the
<a href="/OpenGoPro/ble/features/control.html#set-ap-control">AP Control command</a>:</p>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th style="text-align: center">Bytes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ap Control Enable</td>
      <td style="text-align: center">0x03 0x17 0x01 0x01</td>
    </tr>
    <tr>
      <td>Ap Control Disable</td>
      <td style="text-align: center">0x03 0x17 0x01 0x00</td>
    </tr>
  </tbody>
</table>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>We are using the same notification handler that was defined in the
<a href="/OpenGoPro/tutorials/send-ble-commands#setup">sending commands tutorial</a>.</span>
</div>

<p>Let’s write the bytes to the “Command Request UUID” to enable the WiFi AP!</p>

<div>
    <ul class="tab tab-linked" data-tab="0aef6f6b-4dc3-4317-8a46-f80a41e95315">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="0aef6f6b-4dc3-4317-8a46-f80a41e95315">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">event</span><span class="p">.</span><span class="nf">clear</span><span class="p">()</span>
<span class="n">request</span> <span class="o">=</span> <span class="nf">bytes</span><span class="p">([</span><span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x01</span><span class="p">])</span>
<span class="n">command_request_uuid</span> <span class="o">=</span> <span class="n">GoProUuid</span><span class="p">.</span><span class="n">COMMAND_REQ_UUID</span>
<span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">write_gatt_char</span><span class="p">(</span><span class="n">command_request_uuid</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">await</span> <span class="n">event</span><span class="p">.</span><span class="nf">wait</span><span class="p">()</span>  <span class="c1"># Wait to receive the notification response
</span></code></pre></div></div>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>We make sure to clear the synchronization event before writing, then pend on the event until it is set in
the notification callback.</span>
</div>
</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">enableWifiCommand</span> <span class="p">=</span> <span class="nf">ubyteArrayOf</span><span class="p">(</span><span class="mh">0x03U</span><span class="p">,</span> <span class="mh">0x17U</span><span class="p">,</span> <span class="mh">0x01U</span><span class="p">,</span> <span class="mh">0x01U</span><span class="p">)</span>
<span class="n">ble</span><span class="p">.</span><span class="nf">writeCharacteristic</span><span class="p">(</span><span class="n">goproAddress</span><span class="p">,</span> <span class="nc">GoProUUID</span><span class="p">.</span><span class="nc">CQ_COMMAND</span><span class="p">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">enableWifiCommand</span><span class="p">)</span>
<span class="n">receivedData</span><span class="p">.</span><span class="nf">receive</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Note that we have received the “Command Status” notification response from the
Command Response characteristic since we enabled it’s notifications in
<a href="/OpenGoPro/tutorials/connect-ble#enable-notifications">Enable Notifications</a>. This can
be seen in the demo log:</p>

<div>
    <ul class="tab tab-linked" data-tab="8761f072-8471-457f-a1b0-500005028f8b">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="8761f072-8471-457f-a1b0-500005028f8b">
        
            <li class="active tab-content-container">
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Enabling the WiFi AP
Writing to GoProUuid.COMMAND_REQ_UUID: 03:17:01:01
Received response at GoProUuid.COMMAND_RSP_UUID: 02:17:00
Command sent successfully
WiFi AP is enabled
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Enabling the camera's Wifi AP
</span><span class="gp">Writing characteristic b5f90072-aa8d-11e3-9046-0002a5d5c51b ==&gt;</span><span class="w"> </span>03:17:01:01
<span class="go">Wrote characteristic b5f90072-aa8d-11e3-9046-0002a5d5c51b
Characteristic b5f90073-aa8d-11e3-9046-0002a5d5c51b changed | value: 02:17:00
Received response on b5f90073-aa8d-11e3-9046-0002a5d5c51b: 02:17:00
Command sent successfully
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>As expected, the response was received on the correct UUID and the status was “success”.</p>

<h2 id="establish-connection-to-wifi-ap">Establish Connection to WiFi AP</h2>

<div>
    <ul class="tab tab-linked" data-tab="cc9b0405-d2f2-4c6c-8e67-09184000cb3f">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="cc9b0405-d2f2-4c6c-8e67-09184000cb3f">
        
            <li class="active tab-content-container">
<p>If you have been following through the <code class="language-plaintext highlighter-rouge">ble_enable_wifi.py</code> script, you will notice that it ends here such that
we know the WiFi SSID / password and the WiFi AP is enabled. This is because there
are many different methods of connecting to the WiFi AP depending on your OS and the framework you are
using to develop. You could, for example, simply use your OS’s WiFi GUI to connect.</p>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>While out of the scope of these tutorials, there is a programmatic example of this in the cross-platform
<code class="language-plaintext highlighter-rouge">WiFi Demo</code> from the <a href="https://gopro.github.io/OpenGoPro/python_sdk/quickstart.html#wifi-demo">Open GoPro Python SDK</a>.</span>
</div>

</li>
        
            <li class="tab-content-container">
<p>Using the passwsord and SSID we discovered above, we will now connect to the camera’s network:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wifi</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</code></pre></div></div>

<p>This should show a system popup on your Android device that eventually goes away once the Wifi is
connected.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>This connection process appears to vary drastically in time.</span>
</div>
</li>
        
    </ul>
</div>

<p><strong>Quiz time! 📚 ✏️</strong></p>

<div id="quiz_3e3e82f9-bb97-4343-9695-47d67a031592" class="quiz">
    <div>
        <div id="question_3e3e82f9-bb97-4343-9695-47d67a031592" class="quiz__question">How is the WiFi password response received?</div>
        <div id="answers_3e3e82f9-bb97-4343-9695-47d67a031592">
        
            <input type="radio" name="question" value="A"><label>A: As a read response from the WiFi AP Password characteristic</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: As write responses to the WiFi Request characteristic</label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: As notifications of the Command Response characteristic</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('3e3e82f9-bb97-4343-9695-47d67a031592', 'A')">Submit Answer</button>
    <div id="results_3e3e82f9-bb97-4343-9695-47d67a031592" style="display: none">
        <span id="correct_3e3e82f9-bb97-4343-9695-47d67a031592" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_3e3e82f9-bb97-4343-9695-47d67a031592" style="display: none"> Incorrect!! 😭 The correct answer is A.</span>
        This (and WiFi AP SSID) is an exception to the rule. Usually responses
    are received as notifications to a response characteristic. However, in this case, it is
    received as a direct read response (since we are reading from the characteristic and not
    writing to it).
    </div>
</div>

<div id="quiz_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f" class="quiz">
    <div>
        <div id="question_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f" class="quiz__question">Which of the following statements about the GoPro WiFi AP is true?</div>
        <div id="answers_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f">
        
            <input type="radio" name="question" value="A"><label>A: It only needs to be enabled once and it will then always remain on</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: The WiFi password will never change</label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: The WiFi SSID will never change</label>
            <br>
        
            <input type="radio" name="question" value="D"><label>D: None of the Above</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f', 'D')">Submit Answer</button>
    <div id="results_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f" style="display: none">
        <span id="correct_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_cb4ced9e-1b37-48fb-abcb-8d0af2fedb1f" style="display: none"> Incorrect!! 😭 The correct answer is D.</span>
        While the WiFi AP will remain on for some time, it can and will eventually turn off so
    it is always recommended to first connect via BLE and ensure that it is enabled. The password
    and SSID will almost never change. However, they will change if the connections are reset via
    Connections-&gt;Reset Connections.
    </div>
</div>

<p>You are now connected to the GoPro’s Wifi AP and can send any of the HTTP commands defined in the
<a href="/OpenGoPro/http">HTTP Specification</a>.</p>

<h1 id="station-sta-mode">Station (STA) Mode</h1>

<p>Station Mode is where the GoPro operates as a <a href="https://en.wikipedia.org/wiki/Station_(networking)">Station</a>, allowing
the camera to connect to and communicate with an Access Point such as a switch or a router. This is used, for example,
in the livestreaming and <a href="/OpenGoPro/tutorials/cohn">camera on the home network</a> (COHN) features.</p>

<svg class="plantuml" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="172px" preserveaspectratio="none" style="width:424px;height:172px;background:#FFFFFF;" version="1.1" viewbox="0 0 424 172" width="424px" zoomandpan="magnify"><defs></defs><g><g id="cluster_Station"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="115" x="7" y="14.15"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="55" x="37" y="29.1451">Station</text></g><g id="cluster_AccessPoint"><rect fill="none" height="97" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="114" x="304" y="69.15"></rect><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="97" x="312.5" y="84.1451">AccessPoint</text></g><g id="elem_gopro"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="23" y="49"></rect><path d="M50.6667,49 L50.6667,54 L43.6667,61 L23,61 " fill="none" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="43" x="38" y="81.9951">GoPro</text></g><g id="elem_router"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="320" y="104"></rect><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="382" y="109"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="380" y="111"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="380" y="115"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="42" x="335" y="136.9951">router</text></g><g id="elem_client"><rect fill="#F1F1F1" height="46.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="322.5" y="7"></rect><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="379.5" y="12"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="377.5" y="14"></rect><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="377.5" y="18"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="37" x="337.5" y="39.9951">client</text></g><g id="link_gopro_client"><path d="M112.3899,65.4628 C169.5999,57.3028 260.7801,44.2969 316.2601,36.3869 " fill="none" id="gopro-client" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"></path><polygon fill="#181818" points="106.45,66.31,115.9246,68.9991,111.3999,65.604,114.795,61.0792,106.45,66.31" style="stroke:#181818;stroke-width:1.0;"></polygon><polygon fill="#181818" points="322.2,35.54,312.7255,32.8504,317.2501,36.2457,313.8547,40.7703,322.2,35.54" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="24" x="201" y="46.2169">BLE</text></g><g id="link_gopro_router"><path d="M112.3482,80.9008 C168.7682,91.4308 257.982,108.0981 313.972,118.5581 " fill="none" id="gopro-router" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="106.45,79.8,114.5634,85.3833,111.3651,80.7173,116.0311,77.5191,106.45,79.8" style="stroke:#181818;stroke-width:1.0;"></polygon><polygon fill="#181818" points="319.87,119.66,311.7576,114.0753,314.955,118.7418,310.2885,121.9392,319.87,119.66" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="21" x="202.5" y="94.2169">Wifi</text></g></g></svg>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>When the GoPro is in Station Mode, there is no HTTP communication channel to the Open GoPro client. The GoPro can still
be controlled via BLE.</span>
</div>

<p>In order to configure the GoPro in Station mode, after connecting via BLE, pairing, and enabling notifications, we must:</p>

<ul>
  <li>scan for available networks</li>
  <li>connect to a discovered network, using the correct API based on whether or not we have previously connected to this
network</li>
</ul>

<p>The following subsections will detail these steps. All of the Protobuf operations are performed in the same manner as
in the <a href="/OpenGoPro/tutorials/ble-protobuf">protobuf tutorial</a> such as reusing the <code class="language-plaintext highlighter-rouge">ResponseManager</code>.</p>

<h2 id="scan-for-networks">Scan for Networks</h2>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>It is always necessary to scan for networks, regardless of whether you already have a network’s information and know it
is available. Failure to do so follows an untested and unsupported path in the GoPro’s connection state machine.</span>
</div>

<p>The process of scanning for networks requires several Protobuf Operations as summarized here:</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/plantuml_ble_scan_for_ssids.png" alt="scan_for_ssids" style="
            width: 70%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Scan For Networks

        </figcaption></figure>

<p>First we must request the GoPro to
<a href="/OpenGoPro/ble/features/access_points.html#scan-for-access-points">Scan For Access Points</a>:</p>

<div>
    <ul class="tab tab-linked" data-tab="726f88bb-fb41-4947-9cd3-de967eed8425">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="726f88bb-fb41-4947-9cd3-de967eed8425">
        
            <li class="active tab-content-container">
<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>The code here is taken from <code class="language-plaintext highlighter-rouge">connect_as_sta.py</code></span>
</div>

<p>Let’s send the <a href="/OpenGoPro/ble/protocol/protobuf.html#requeststartscan">scan request</a> and then retrieve and parse
<a href="/OpenGoPro/ble/protocol/protobuf.html#notifstartscanning">notifications</a> until we receive a notification where the
<code class="language-plaintext highlighter-rouge">scanning_state</code> is set to <a href="/OpenGoPro/ble/protocol/protobuf.html#enumscanning">SCANNING_SUCCESS</a>.
Then we store the <code class="language-plaintext highlighter-rouge">scan id</code> from the notification for later use in retrieving the scan results.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">start_scan_request</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="mh">0x02</span><span class="p">,</span>  <span class="c1"># Feature ID
</span>        <span class="mh">0x02</span><span class="p">,</span>  <span class="c1"># Action ID
</span>        <span class="o">*</span><span class="n">proto</span><span class="p">.</span><span class="nc">RequestStartScan</span><span class="p">().</span><span class="nc">SerializePartialToString</span><span class="p">(),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">start_scan_request</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">start_scan_request</span><span class="p">))</span>
<span class="k">await</span> <span class="n">manager</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="nf">write_gatt_char</span><span class="p">(</span><span class="n">GoProUuid</span><span class="p">.</span><span class="n">NETWORK_MANAGEMENT_REQ_UUID</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">start_scan_request</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">while</span> <span class="n">response</span> <span class="p">:</span><span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="p">.</span><span class="nf">get_next_response_as_protobuf</span><span class="p">():</span>
    <span class="bp">...</span>
    <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">action_id</span> <span class="o">==</span> <span class="mh">0x0B</span><span class="p">:</span>  <span class="c1"># Scan Notifications
</span>        <span class="n">scan_notification</span><span class="p">:</span> <span class="n">proto</span><span class="p">.</span><span class="n">NotifStartScanning</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">data</span>  <span class="c1"># type: ignore
</span>        <span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Received scan notification: </span><span class="si">{</span><span class="n">scan_notification</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scan_notification</span><span class="p">.</span><span class="n">scanning_state</span> <span class="o">==</span> <span class="n">proto</span><span class="p">.</span><span class="n">EnumScanning</span><span class="p">.</span><span class="n">SCANNING_SUCCESS</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">scan_notification</span><span class="p">.</span><span class="n">scan_id</span>
</code></pre></div></div>

<p>This will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Scanning for available Wifi Networks
Writing: 02:02:02
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 06:02:82:08:01:10:02
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 0a:02:0b:08:05:10:01:18:05:20:01
Received scan notification: scanning_state: SCANNING_SUCCESS
    scan_id: 1
    total_entries: 5
    total_configured_ssid: 1
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<p>Next we must request the GoPro to
<a href="/OpenGoPro/ble/features/access_points.html#get-ap-scan-results">return the Scan Results</a>.
Using the <code class="language-plaintext highlighter-rouge">scan_id</code> from above, let’s send the
<a href="/OpenGoPro/ble/features/access_points.html#get-ap-scan-results">Get AP Scan Results</a> request, then
retrieve and parse the response:</p>

<div>
    <ul class="tab tab-linked" data-tab="7f04febe-d856-4768-826e-9b1a714af892">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="7f04febe-d856-4768-826e-9b1a714af892">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">results_request</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="mh">0x02</span><span class="p">,</span>  <span class="c1"># Feature ID
</span>        <span class="mh">0x03</span><span class="p">,</span>  <span class="c1"># Action ID
</span>        <span class="o">*</span><span class="n">proto</span><span class="p">.</span><span class="nc">RequestGetApEntries</span><span class="p">(</span><span class="n">start_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_entries</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">scan_id</span><span class="o">=</span><span class="n">scan_id</span><span class="p">).</span><span class="nc">SerializePartialToString</span><span class="p">(),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">results_request</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">results_request</span><span class="p">))</span>
<span class="k">await</span> <span class="n">manager</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="nf">write_gatt_char</span><span class="p">(</span><span class="n">GoProUuid</span><span class="p">.</span><span class="n">NETWORK_MANAGEMENT_REQ_UUID</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">results_request</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">response</span> <span class="p">:</span><span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="p">.</span><span class="nf">get_next_response_as_protobuf</span><span class="p">():</span>
<span class="n">entries_response</span><span class="p">:</span> <span class="n">proto</span><span class="p">.</span><span class="n">ResponseGetApEntries</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">data</span>  <span class="c1"># type: ignore
</span><span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sh">"</span><span class="s">Found the following networks:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries_response</span><span class="p">.</span><span class="n">entries</span><span class="p">:</span>
    <span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>
<span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="n">entries_response</span><span class="p">.</span><span class="n">entries</span><span class="p">)</span>
</code></pre></div></div>

<p>This will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Getting the scanned networks.
Writing: 08:02:03:08:00:10:64:18:01
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 20:76:02:83:08:01:10:01:1a:13:0a:0a:64:61:62:75:67:64:61:62
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 80:75:67:10:03:20:e4:28:28:2f:1a:13:0a:0a:41:54:54:54:70:34
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 81:72:36:46:69:10:02:20:f1:2c:28:01:1a:13:0a:0a:41:54:54:62
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 82:37:4a:67:41:77:61:10:02:20:99:2d:28:01:1a:16:0a:0d:52:69
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 83:6e:67:20:53:65:74:75:70:20:65:37:10:01:20:ec:12:28:00:1a
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 84:17:0a:0e:48:6f:6d:65:79:6e:65:74:5f:32:47:45:58:54:10:01
Received response at GoProUuid.NETWORK_MANAGEMENT_RSP_UUID: 85:20:85:13:28:01
Found the following networks:
    ssid: "dabugdabug"
         signal_strength_bars: 3
         signal_frequency_mhz: 5220
         scan_entry_flags: 47
    ssid: "ATTTp4r6Fi"
         signal_strength_bars: 2
         signal_frequency_mhz: 5745
         scan_entry_flags: 1
    ssid: "ATTb7JgAwa"
         signal_strength_bars: 2
         signal_frequency_mhz: 5785
         scan_entry_flags: 1
    ssid: "Ring Setup e7"
         signal_strength_bars: 1
         signal_frequency_mhz: 2412
         scan_entry_flags: 0
    ssid: "Homeynet_2GEXT"
         signal_strength_bars: 1
         signal_frequency_mhz: 2437
         scan_entry_flags: 1
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<p>At this point we have all of the discovered networks. Continue on to see how to use this information.</p>

<h2 id="connect-to-network">Connect to Network</h2>

<p>Depending on whether the GoPro has already connected to the desired network, we must next perform either the
<a href="/OpenGoPro/ble/features/access_points.html#connect-to-provisioned-access-point">Connect</a> or
<a href="/OpenGoPro/ble/features/access_points.html#connect-to-a-new-access-point">Connect New</a> operation.
This will be described below but first, a note on fragmentation:</p>

<h3 id="gatt-write-fragmentation">GATT Write Fragmentation</h3>

<p>Up to this point in the tutorials, all of the operations we have been performing have resulted in GATT write requests
guaranteed to be less than maximum BLE packet size of 20 bytes. However, depending on the SSID and password used in
the Connect New operation, this maximum size might be surpassed. Therefore, it is necessary to fragment the payload. This
is essentially the inverse of the
<a href="/OpenGoPro/tutorials/parse-ble-responses#parsing-multiple-packet-tlv-responses">accumulation algorithm</a>.
We accomplish this as follows:</p>

<div>
    <ul class="tab tab-linked" data-tab="993e1aab-2388-4e1f-9555-895aa0e3467e">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="993e1aab-2388-4e1f-9555-895aa0e3467e">
        
            <li class="active tab-content-container">
<p>Let’s create a generator to yield fragmented packets (<code class="language-plaintext highlighter-rouge">yield_fragmented_packets</code>) from a monolithic payload. First,
depending on the length of the payload, we create the
<a href="/OpenGoPro/ble/protocol/data_protocol.html#packet-headers">header</a> for the first packet that specifies the
total payload length:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">13</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">((</span><span class="n">length</span> <span class="o">|</span> <span class="mh">0x2000</span><span class="p">).</span><span class="nf">to_bytes</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sh">"</span><span class="s">big</span><span class="sh">"</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">16</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">((</span><span class="n">length</span> <span class="o">|</span> <span class="mh">0x6400</span><span class="p">).</span><span class="nf">to_bytes</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sh">"</span><span class="s">big</span><span class="sh">"</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
</code></pre></div></div>

<p>Then we chunk through the payload, prepending either the above header for the first packet or the continuation header
for subsequent packets:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">byte_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">bytes_remaining</span> <span class="p">:</span><span class="o">=</span> <span class="n">length</span> <span class="o">-</span> <span class="n">byte_index</span><span class="p">:</span>
    <span class="c1"># If this is the first packet, use the appropriate header. Else use the continuation header
</span>    <span class="k">if</span> <span class="n">is_first_packet</span><span class="p">:</span>
        <span class="n">packet</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="n">is_first_packet</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">packet</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span><span class="n">CONTINUATION_HEADER</span><span class="p">)</span>
    <span class="c1"># Build the current packet
</span>    <span class="n">packet_size</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">MAX_PACKET_SIZE</span> <span class="o">-</span> <span class="nf">len</span><span class="p">(</span><span class="n">packet</span><span class="p">),</span> <span class="n">bytes_remaining</span><span class="p">)</span>
    <span class="n">packet</span><span class="p">.</span><span class="nf">extend</span><span class="p">(</span><span class="nf">bytearray</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">byte_index</span> <span class="p">:</span> <span class="n">byte_index</span> <span class="o">+</span> <span class="n">packet_size</span><span class="p">]))</span>
    <span class="k">yield</span> <span class="nf">bytes</span><span class="p">(</span><span class="n">packet</span><span class="p">)</span>
    <span class="c1"># Increment byte_index for continued processing
</span>    <span class="n">byte_index</span> <span class="o">+=</span> <span class="n">packet_size</span>
</code></pre></div></div>

<p>Finally we create a helper method that we can reuse throughout the tutorials to use this generator to send GATT Writes
using a given Bleak client:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="k">def</span> <span class="nf">fragment_and_write_gatt_char</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">BleakClient</span><span class="p">,</span> <span class="n">char_specifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">packet</span> <span class="ow">in</span> <span class="nf">yield_fragmented_packets</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">write_gatt_char</span><span class="p">(</span><span class="n">char_specifier</span><span class="p">,</span> <span class="n">packet</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>The safest solution would be to always use the above fragmentation method. For the sake of simplicity in these tutorials,
we are only using this where there is a possibility of exceeding the maximum BLE packet size.</span>
</div>

<h3 id="connect-example">Connect Example</h3>

<p>In order to proceed, we must first inspect the scan result gathered from the previous section to see which
connect operation to use. Specifically we are checking the
<a href="/OpenGoPro/ble/protocol/protobuf.html#responsegetapentries-scanentry">scan_entry_flags</a> to see if the
<a href="/OpenGoPro/ble/protocol/protobuf.html#proto-enumscanentryflags">SCAN_FLAG_CONFIGURED</a> bit is set. If the
bit is set (and thus we have already provisioned this network) then we must use
<a href="/OpenGoPro/ble/features/access_points.html#connect-to-provisioned-access-point">Connect</a> . Otherwise we must use
<a href="/OpenGoPro/ble/features/access_points.html#connect-to-a-new-access-point">Connect New</a>:</p>

<div>
    <ul class="tab tab-linked" data-tab="0083e8ae-2d73-473c-b360-6f06b292448b">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="0083e8ae-2d73-473c-b360-6f06b292448b">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">entry</span><span class="p">.</span><span class="n">scan_entry_flags</span> <span class="o">&amp;</span> <span class="n">proto</span><span class="p">.</span><span class="n">EnumScanEntryFlags</span><span class="p">.</span><span class="n">SCAN_FLAG_CONFIGURED</span><span class="p">:</span>
    <span class="n">connect_request</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="mh">0x02</span><span class="p">,</span> <span class="c1"># Feature ID
</span>            <span class="mh">0x04</span><span class="p">,</span> <span class="c1"># Action ID
</span>            <span class="o">*</span><span class="n">proto</span><span class="p">.</span><span class="nc">RequestConnect</span><span class="p">(</span><span class="n">ssid</span><span class="o">=</span><span class="n">entry</span><span class="p">.</span><span class="n">ssid</span><span class="p">).</span><span class="nc">SerializePartialToString</span><span class="p">(),</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">connect_request</span> <span class="o">=</span> <span class="nf">bytearray</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="mh">0x02</span><span class="p">,</span> <span class="c1"># Feature ID
</span>            <span class="mh">0x05</span><span class="p">,</span> <span class="c1"># Action ID
</span>            <span class="o">*</span><span class="n">proto</span><span class="p">.</span><span class="nc">RequestConnectNew</span><span class="p">(</span><span class="n">ssid</span><span class="o">=</span><span class="n">entry</span><span class="p">.</span><span class="n">ssid</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">).</span><span class="nc">SerializePartialToString</span><span class="p">(),</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<p>Now that we have the correct request built, we can send it (using our newly created fragmentation method) we can send it.
Then we will continuously receive
<a href="/OpenGoPro/ble/protocol/protobuf.html#notifprovisioningstate">Provisioning Notifications</a> which should be checked until
the <code class="language-plaintext highlighter-rouge">provisioning_state</code> is set to
<a href="/OpenGoPro/ble/protocol/protobuf.html#proto-enumprovisioning">PROVISIONING_SUCCESS_NEW_AP</a>.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>The final <code class="language-plaintext highlighter-rouge">provisioning_state</code> that we are looking for is always <code class="language-plaintext highlighter-rouge">PROVISIONING_SUCCESS_NEW_AP</code> both in the Connect and
Connect New use cases.</span>
</div>

<p>The procedure is summarized here:</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/plantuml_ble_connect_ap.png" alt="connect_ap" style="
            width: 60%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Connect to Already Configured Network

        </figcaption></figure>

<div>
    <ul class="tab tab-linked" data-tab="6e484d56-ea87-4edd-87c6-40a410418b9e">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="6e484d56-ea87-4edd-87c6-40a410418b9e">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">await</span> <span class="nf">fragment_and_write_gatt_char</span><span class="p">(</span><span class="n">manager</span><span class="p">.</span><span class="n">client</span><span class="p">,</span> <span class="n">GoProUuid</span><span class="p">.</span><span class="n">NETWORK_MANAGEMENT_REQ_UUID</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">connect_request</span><span class="p">)</span>
<span class="k">while</span> <span class="n">response</span> <span class="p">:</span><span class="o">=</span> <span class="k">await</span> <span class="n">manager</span><span class="p">.</span><span class="nf">get_next_response_as_protobuf</span><span class="p">():</span>
    <span class="bp">...</span>
    <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">action_id</span> <span class="o">==</span> <span class="mh">0x0C</span><span class="p">:</span>  <span class="c1"># NotifProvisioningState Notifications
</span>        <span class="n">provisioning_notification</span><span class="p">:</span> <span class="n">proto</span><span class="p">.</span><span class="n">NotifProvisioningState</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">data</span>  <span class="c1"># type: ignore
</span>        <span class="k">if</span> <span class="n">provisioning_notification</span><span class="p">.</span><span class="n">provisioning_state</span> <span class="o">==</span> <span class="n">proto</span><span class="p">.</span><span class="n">EnumProvisioning</span><span class="p">.</span><span class="n">PROVISIONING_SUCCESS_NEW_AP</span><span class="p">:</span>
            <span class="k">return</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<p>At this point, the GoPro is connect to the desired network in Station Mode!</p>

<p><strong>Quiz time! 📚 ✏️</strong></p>

<div id="quiz_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301" class="quiz">
    <div>
        <div id="question_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301" class="quiz__question">True or False: When the GoPro is in Station Mode, it can be communicated with via both BLE and HTTP.</div>
        <div id="answers_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301">
        
            <input type="radio" name="question" value="A"><label>A: True</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: False</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('9b4e0c91-9e06-4dcb-86c6-62e4cdca4301', 'B')">Submit Answer</button>
    <div id="results_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301" style="display: none">
        <span id="correct_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_9b4e0c91-9e06-4dcb-86c6-62e4cdca4301" style="display: none"> Incorrect!! 😭 The correct answer is B.</span>
        When the GoPro is in station mode, it is connected via WiFi to another Access Point; not connected via Wifi
    to you (the client). However, it is possible to maintain the BLE connection in STA mode so that you can still control
    the GoPro.
    </div>
</div>

<h1 id="troubleshooting">Troubleshooting</h1>

<p>See the first tutorial’s
<a href="/OpenGoPro/tutorials/connect-ble#troubleshooting">BLE troubleshooting section</a> to troubleshoot
BLE problems.</p>

<h1 id="good-job">Good Job!</h1>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>Congratulations 🤙</span>
</div>

<p>You have now connected the GoPro to a WiFi network in either AP or STA mode.</p>

<p>To see how to make use of AP mode, continue to the next tutorial.</p>

<p>To see how make use of STA mode, continue to the
<a href="/OpenGoPro/tutorials/cohn">camera on the home network tutorial</a>.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-10-04T10:01:45-07:00">October 4, 2024</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/OpenGoPro/tutorials/ble-protobuf" class="pagination--pager" title="Tutorial 5: BLE Protobuf Operations
">Previous</a>
    
    
      <a href="/OpenGoPro/tutorials/send-wifi-commands" class="pagination--pager" title="Tutorial 7: Send WiFi Commands
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
        
        <li><strong>Follow:</strong></li>
           
        <li>
            <a href="https://www.gopro.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i>
                Website</a>
        </li>
          
        <li>
            <a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>
                Twitter</a>
        </li>
          
        <li>
            <a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i>
                Facebook</a>
        </li>
          
        <li>
            <a href="https://github.com/gopro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i>
                GitHub</a>
        </li>
          
        <li>
            <a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i>
                Instagram</a>
        </li>
           
    </ul>
</div>

<div class="page__footer-copyright">
    © 2024 GoPro. Powered by
    <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp;
    <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.
    <p>
        Can be used with GoPro® HERO9 and HERO10 cameras. You must include the following text on
        every page where it can be seen by someone purchasing such an item: <em>"This product
        and/or service is not affiliated with, endorsed by or in any way associated with
        GoPro Inc. or its products and services. GoPro, HERO, and their respective logos
        are trademarks or registered trademarks of GoPro, Inc."</em>
    </p>
</div>

      </footer>
    </div>

    
  <script src="/OpenGoPro/assets/js/main.min.js"></script>




<script src="/OpenGoPro/assets/js/lunr/lunr.min.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-store.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
