<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html lang="en-US" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Tutorial 7: Send WiFi Commands :  Open GoPro</title>
<meta name="description" content="This document will provide a walk-through tutorial to perform Open GoPro HTTP Operations with the GoPro.">


  <meta name="author" content="GoPro">
  
  <meta property="article:author" content="GoPro">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Open GoPro">
<meta property="og:title" content="Tutorial 7: Send WiFi Commands">
<meta property="og:url" content="https://gopro.github.io/OpenGoPro/tutorials/send-wifi-commands">


  <meta property="og:description" content="This document will provide a walk-through tutorial to perform Open GoPro HTTP Operations with the GoPro.">







  <meta property="article:published_time" content="2025-03-25T09:12:44-07:00">






<link rel="canonical" href="https://gopro.github.io/OpenGoPro/tutorials/send-wifi-commands">












<!-- end _includes/seo.html -->


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/OpenGoPro/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>


  
    <script src="/OpenGoPro/assets/js/tabs.js"></script>
  
    <script src="/OpenGoPro/assets/js/quiz.js"></script>
  
    <script src="/OpenGoPro/assets/js/accordion.js"></script>
  


    <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script>
    // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function (event) {
        var manualAnchors = new AnchorJS();
        manualAnchors.options = {
            titleText: 'Permalink',
            placement: 'left'
        };
        manualAnchors.add('.anchored');
    });
</script>
<link rel="apple-touch-icon" sizes="180x180" href="/OpenGoPro/assets/images/logos/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/OpenGoPro/assets/images/logos/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/OpenGoPro/assets/images/logos/favicon-16x16.png">
<link rel="manifest" href="/OpenGoPro/assets/images/logos/site.webmanifest">
<link rel="mask-icon" href="/OpenGoPro/assets/images/logos/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/OpenGoPro/assets/images/logos/favicon.ico">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-config" content="/assets/images/logos/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/OpenGoPro/"><img src="/OpenGoPro/assets/images/logos/logo.png" alt="Open GoPro"></a>
        
        <a class="site-title" href="/OpenGoPro/">
          Open GoPro
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/OpenGoPro/">Home</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/ble/">BLE Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/http">HTTP Spec</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/tutorials">Tutorials</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://github.com/gopro/OpenGoPro/tree/main/demos">Demos</a>
            </li>
<li class="masthead__menu-item">
              <a href="/OpenGoPro/faq">FAQ</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1">
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/OpenGoPro/tutorials" itemprop="item"><span itemprop="name">Tutorials</span></a>
          <meta itemprop="position" content="2">
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Tutorial 7: Send WiFi Commands</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://gopro.github.io/OpenGoPro/">
        <img src="/OpenGoPro/assets/images/logos/logo_square.png" alt="GoPro" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://gopro.github.io/OpenGoPro/" itemprop="url">GoPro</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Be a <strong>hero</strong>.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">US</span>
        </li>
      

      
        
          
            <li><a href="https://www.gopro.com" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/gopro" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox">
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-ble"><span class="nav__sub-title">1: Connect BLE</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-ble-commands"><span class="nav__sub-title">2: Send BLE Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/parse-ble-responses"><span class="nav__sub-title">3: Parse BLE TLV Responses</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-queries"><span class="nav__sub-title">4: BLE Queries</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/ble-protobuf"><span class="nav__sub-title">5: BLE Protobuf</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/connect-wifi"><span class="nav__sub-title">6: Connect WiFi</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/send-wifi-commands"><span class="nav__sub-title">7: Send WiFi Commands</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/camera-media-list"><span class="nav__sub-title">8: Camera Media List</span></a>
          

          
        </li>
      
        <li>
          
            <a href="/OpenGoPro/tutorials/cohn"><span class="nav__sub-title">9: Camera on the Home Network</span></a>
          

          
        </li>
      
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Tutorial 7: Send WiFi Commands">
    <meta itemprop="description" content="This document will provide a walk-through tutorial to perform Open GoPro HTTP Operationswith the GoPro.">
    <meta itemprop="datePublished" content="2025-03-25T09:12:44-07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://gopro.github.io/OpenGoPro/tutorials/send-wifi-commands" itemprop="url">Tutorial 7: Send WiFi Commands
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#just-show-me-the-demos">Just Show me the Demo(s)!!</a></li>
<li><a href="#setup">Setup</a></li>
<li>
<a href="#sending-http-commands-with-json-responses">Sending HTTP Commands with JSON Responses</a><ul>
<li><a href="#get-camera-state">Get Camera State</a></li>
<li><a href="#load-preset-group">Load Preset Group</a></li>
<li><a href="#set-shutter">Set Shutter</a></li>
<li><a href="#set-setting">Set Setting</a></li>
<li><a href="#preview-stream">Preview Stream</a></li>
</ul>
</li>
<li>
<a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#http-logging">HTTP Logging</a></li></ul>
</li>
<li><a href="#good-job">Good Job!</a></li>
</ul>
            </nav>
          </aside>
        
        <p>This document will provide a walk-through tutorial to perform Open GoPro <a href="/OpenGoPro/http">HTTP Operations</a>
with the GoPro.</p>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>It is suggested that you have first completed the
<a href="/OpenGoPro/tutorials/connect-wifi">Connecting to Wifi</a> tutorial.</span>
</div>

<p>This tutorial only considers sending these commands as one-off commands. That is, it does not consider state management /
synchronization when sending multiple commands. This will be discussed in a future tutorial.</p>

<p>There are two types of responses that can be received from the HTTP commands: JSON and binary. This section
will deal with commands that return JSON responses. For commands with binary responses (as well as commands with
JSON responses that work with the media list), see the
<a href="/OpenGoPro/tutorials/camera-media-list">next tutorial</a>.</p>

<h1 id="requirements">Requirements</h1>

<p>It is assumed that the hardware and software requirements from the
<a href="/OpenGoPro/tutorials/connect-ble#requirements">connecting BLE tutorial</a>
are present and configured correctly.</p>

<p>The scripts that will be used for this tutorial can be found in the
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/tutorial_modules/tutorial_7_send_wifi_commands">Tutorial 7 Folder</a>.</p>

<h1 id="just-show-me-the-demos">Just Show me the Demo(s)!!</h1>

<div>
    <ul class="tab tab-linked" data-tab="a5d8b03c-2e17-483e-8383-dc959c9c86c8">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="a5d8b03c-2e17-483e-8383-dc959c9c86c8">
        
            <li class="active tab-content-container">
<p>Each of the scripts for this tutorial can be found in the Tutorial 7
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/python/tutorial/tutorial_modules/tutorial_7_send_wifi_commands/">directory</a>.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>Python &gt;= 3.9 and &lt; 3.12 must be used as specified in the requirements</span>
</div>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>You must be connected to the camera via WiFi as stated in
<a href="/OpenGoPro/tutorials/connect-wifi#access-point-mode-ap">Tutorial 6</a>.</span>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Get Camera State<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can test querying the state of your camera with HTTP over WiFi using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_get_state.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_get_state.py <span class="nt">--help</span>
<span class="go">usage: wifi_command_get_state.py [-h]

Get the state of the GoPro (status and settings).

optional arguments:
  -h, --help  show this help message and exit
</span></code></pre></div></div>

</div>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Preview Stream<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can test enabling the UDP preview stream with HTTP over WiFi using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_preview_stream.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_preview_stream.py <span class="nt">--help</span>
<span class="go">usage: wifi_command_preview_stream.py [-h]

Enable the preview stream.

optional arguments:
  -h, --help  show this help message and exit
</span></code></pre></div></div>

<p>Once enabled the stream can be viewed at <code class="language-plaintext highlighter-rouge">udp://@:8554</code> (For more details see the View Stream tab in the
<a href="/OpenGoPro/tutorials/send-wifi-commands#preview-stream">Preview Stream</a> section below.</p>
</div>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Load Preset Group<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can test sending the load preset group command with HTTP over WiFi using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_load_group.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_load_group.py <span class="nt">--help</span>
<span class="go">usage: wifi_command_load_group.py [-h]

Load the video preset group.

optional arguments:
  -h, --help  show this help message and exit
</span></code></pre></div></div>

</div>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Set Shutter<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can test sending the Set Shutter command with HTTP over WiFi using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_set_shutter.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_set_shutter.py <span class="nt">--help</span>
<span class="go">usage: wifi_command_set_shutter.py [-h]

Take a 3 second video.

optional arguments:
  -h, --help  show this help message and exit
</span></code></pre></div></div>

</div>
</div>

<div class="accordion-container anchored">
    <button class="accordion">Set Setting<i class="fa fa-chevron-down"></i></button>
    <div class="panel">
<p>You can test setting the resolution setting with HTTP over WiFi using the following script:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_set_resolution.py
</code></pre></div></div>

<p>See the help for parameter definitions:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python wifi_command_set_resolution.py <span class="nt">--help</span>
<span class="go">usage: wifi_command_set_resolution.py [-h]

Set the video resolution to 1080.

optional arguments:
  -h, --help  show this help message and exit
</span></code></pre></div></div>

</div>
</div>

</li>
        
            <li class="tab-content-container">
<p>The Kotlin file for this tutorial can be found on
<a href="https://github.com/gopro/OpenGoPro/tree/main/demos/kotlin/tutorial/app/src/main/java/com/example/open_gopro_tutorial/tutorials/Tutorial6SendWifiCommands.kt">Github</a>.</p>

<p>To perform the tutorial, run the Android Studio project, select “Tutorial 7” from the dropdown and click on “Perform.”
This requires:</p>

<ul>
  <li>a GoPro is already connected via BLE, i.e. that Tutorial 1 was already run.</li>
  <li>a GoPro is already connected via Wifi, i.e. that Tutorial 5 was already run.</li>
</ul>

<p>You can check the BLE and Wifi statuses at the top of the app.</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/kotlin/tutorial_7.png" alt="kotlin_tutorial_7" style="
            width: 40%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Perform Tutorial 7

        </figcaption></figure>

<p>This will start the tutorial and log to the screen as it executes. When the tutorial is complete, click
“Exit Tutorial” to return to the Tutorial selection screen.</p>

</li>
        
    </ul>
</div>

<h1 id="setup">Setup</h1>

<p>We must first connect to The GoPro’s WiFi Access Point (AP) as was discussed in the
<a href="/OpenGoPro/tutorials/connect-wifi">Connecting to Wifi</a> tutorial.</p>

<h1 id="sending-http-commands-with-json-responses">Sending HTTP Commands with JSON Responses</h1>

<p>Now that we are are connected via WiFi, we can communicate via HTTP commands.</p>

<div>
    <ul class="tab tab-linked" data-tab="d6e4b91c-9eb5-46c9-8618-08cc6dfcae1a">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="d6e4b91c-9eb5-46c9-8618-08cc6dfcae1a">
        
            <li class="active tab-content-container">
<p>We will use the <a href="https://pypi.org/project/requests/">requests</a> package to send the various HTTP commands.</p>

<div class="callout tip">
<i class="fa fa-tools fa-2x" style="color: #ebc21c; margin: 0.25em;"></i><span>We are building the endpoints using the GOPRO_BASE_URL defined in the tutorial package’s <code class="language-plaintext highlighter-rouge">__init__.py</code></span>
</div>
</li>
        
            <li class="tab-content-container">
<p>We are using <a href="https://ktor.io/">ktor</a> for the HTTP client. We are using an abstracted <code class="language-plaintext highlighter-rouge">get</code> function from our
<code class="language-plaintext highlighter-rouge">Wifi</code> class to send get requests as such:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="kd">val</span> <span class="py">client</span> <span class="k">by</span> <span class="nf">lazy</span> <span class="p">{</span>
    <span class="nc">HttpClient</span><span class="p">(</span><span class="nc">CIO</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">install</span><span class="p">(</span><span class="nc">HttpTimeout</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">suspend</span> <span class="k">fun</span> <span class="nf">get</span><span class="p">(</span><span class="n">endpoint</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="n">timeoutMs</span><span class="p">:</span> <span class="nc">Long</span> <span class="p">=</span> <span class="mi">5000L</span><span class="p">):</span> <span class="nc">JsonObject</span> <span class="p">{</span>
    <span class="nc">Timber</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"GET request to: $endpoint"</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">response</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">timeout</span> <span class="p">{</span>
            <span class="n">requestTimeoutMillis</span> <span class="p">=</span> <span class="n">timeoutMs</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">bodyAsString</span><span class="p">:</span> <span class="nc">String</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">prettyJson</span><span class="p">.</span><span class="nf">parseToJsonElement</span><span class="p">(</span><span class="n">bodyAsString</span><span class="p">).</span><span class="n">jsonObject</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Both Command Requests and Setting Requests follow the same procedure:</p>

<ol>
  <li>Send HTTP GET command to appropriate endpoint</li>
  <li>Receive confirmation from GoPro (via HTTP response) that request was received.</li>
  <li>GoPro reacts to command</li>
</ol>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>The HTTP response only indicates that the request was received correctly. The relevant behavior of the
GoPro must be observed to verify when the command’s effects have been applied.</span>
</div>

<svg class="plantuml" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="227px" preserveaspectratio="none" style="width:608px;height:227px;background:#FFFFFF;" version="1.1" viewbox="0 0 608 227" width="608px" zoomandpan="magnify"><defs></defs><g><rect fill="#FFFFFF" height="64.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="349.5" y="102.5625"></rect><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="96" x2="96" y1="36.2969" y2="191.8281"></line><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="354" x2="354" y1="36.2969" y2="191.8281"></line><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="5" y="5"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="169" x="12" y="24.9951">Open GoPro user device</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="5" y="190.8281"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="169" x="12" y="210.8232">Open GoPro user device</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="326" y="5"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="43" x="333" y="24.9951">GoPro</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="326" y="190.8281"></rect><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="43" x="333" y="210.8232">GoPro</text><rect fill="#FFFFFF" height="64.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="349.5" y="102.5625"></rect><path d="M39,51.2969 L39,76.2969 L412,76.2969 L412,61.2969 L402,51.2969 L39,51.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><path d="M402,51.2969 L402,61.2969 L412,61.2969 L402,51.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"></path><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="154" x="144" y="68.3638">PC connected to WiFi AP</text><line style="stroke:#181818;stroke-width:1.0;" x1="347.5" x2="337.5" y1="102.5625" y2="98.5625"></line><line style="stroke:#181818;stroke-width:1.0;" x1="347.5" x2="337.5" y1="102.5625" y2="106.5625"></line><line style="stroke:#181818;stroke-width:1.0;" x1="96.5" x2="348.5" y1="102.5625" y2="102.5625"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="162" x="103.5" y="97.4966">Command Request (GET)</text><line style="stroke:#181818;stroke-width:1.0;" x1="97.5" x2="107.5" y1="131.6953" y2="127.6953"></line><line style="stroke:#181818;stroke-width:1.0;" x1="97.5" x2="107.5" y1="131.6953" y2="135.6953"></line><line style="stroke:#181818;stroke-width:1.0;" x1="96.5" x2="348.5" y1="131.6953" y2="131.6953"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="229" x="113.5" y="126.6294">Command Response (HTTP 200 OK)</text><line style="stroke:#181818;stroke-width:1.0;" x1="359.5" x2="401.5" y1="165.8281" y2="165.8281"></line><line style="stroke:#181818;stroke-width:1.0;" x1="401.5" x2="401.5" y1="165.8281" y2="178.8281"></line><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="401.5" y1="178.8281" y2="178.8281"></line><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="364.5" y1="178.8281" y2="174.8281"></line><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="364.5" y1="178.8281" y2="182.8281"></line><text fill="#000000" font-family="sans-serif" font-size="13" lengthadjust="spacing" textlength="235" x="366.5" y="160.7622">Apply affects of command when able</text></g></svg>

<h2 id="get-camera-state">Get Camera State</h2>

<p>The first command we will be sending is
<a href="/OpenGoPro/http#tag/Query/operation/OGP_GET_STATE">Get Camera State</a>. This command will
return all of the current settings and values. It is basically a combination of the
<a href="/OpenGoPro/ble/features/query.html#get-setting-values">Get All Settings</a> and
<a href="/OpenGoPro/ble/features/query.html#get-status-values">Get All Statuses</a>
commands that were sent via BLE. Since there is no way to query individual settings / statuses
via WiFi (or register for asynchronous notifications when they change), this is the only option to query
setting / status information via WiFi.</p>

<p>The command writes to the following endpoint:</p>

<p><code class="language-plaintext highlighter-rouge">/gopro/camera/state</code></p>

<p>Let’s build the endpoint then perform the GET operation and check the response for errors.
Any errors will raise an exception.</p>

<div>
    <ul class="tab tab-linked" data-tab="2c4d58d5-c6e8-4e16-8a44-9f12e071a32f">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="2c4d58d5-c6e8-4e16-8a44-9f12e071a32f">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="n">GOPRO_BASE_URL</span> <span class="o">+</span> <span class="sh">"</span><span class="s">/gopro/camera/state</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">response</span> <span class="p">=</span> <span class="n">wifi</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="nc">GOPRO_BASE_URL</span> <span class="p">+</span> <span class="s">"gopro/camera/state"</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div>
    <ul class="tab tab-linked" data-tab="5994d98c-0ed6-4ca8-800e-ad4dab0073d3">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="5994d98c-0ed6-4ca8-800e-ad4dab0073d3">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Response: </span><span class="si">{</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>The response will log as such (abbreviated for brevity):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Getting GoPro's status and settings: sending http://10.5.5.9:8080/gopro/camera/state
INFO:root:Command sent successfully
INFO:root:Response: {
    "status": {
        "1": 1,
        "2": 2,
        "3": 0,
        "4": 255,
        "6": 0,
        "8": 0,
        "9": 0,
        "10": 0,
        "11": 0,
        "13": 0,
        "14": 0,
        "17": 1,

</span><span class="c">  ...
</span><span class="go">
  "settings": {
      "2": 9,
      "3": 1,
      "5": 0,
      "6": 1,
      "13": 1,
      "19": 0,
      "24": 0,
      "30": 0,
      "31": 0,
      "32": 10,
      "41": 9,
      "42": 5,
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="n">prettyJson</span><span class="p">.</span><span class="nf">encodeToString</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</code></pre></div></div>

<p>The response will log as such (abbreviated for brevity):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Getting camera state
GET request to: http://10.5.5.9:8080/gopro/camera/state
{
    "status": {
        "1": 1,
        "2": 4,
        "3": 0,
        "4": 255,
        "6": 0,
        "8": 0,
        "9": 0,
        "10": 0,
        "11": 0,
        "13": 0,
</span><span class="c">    ...
</span><span class="go">        "113": 0,
        "114": 0,
        "115": 0,
        "116": 0,
        "117": 31154688
    },
    "settings": {
        "2": 9,
        "3": 1,
        "5": 0,
        "6": 1,
        "13": 1,
</span><span class="c">        ...
</span><span class="go">        "177": 0,
        "178": 1,
        "179": 3,
        "180": 0,
        "181": 0
    }
}
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>We can see what each of these values mean by looking at relevant documentation in the <code class="language-plaintext highlighter-rouge">settings</code> or <code class="language-plaintext highlighter-rouge">status</code> object of the
<a href="/OpenGoPro/http#schema/State">State</a> schema.</p>

<p>For example (for settings):</p>

<ul>
  <li>ID 2 == 9 equates to Resolution == 1080</li>
  <li>ID 3 == 1 equates to FPS == 120</li>
</ul>

<h2 id="load-preset-group">Load Preset Group</h2>

<p>The next command we will be sending is
<a href="/OpenGoPro/http#tag/Presets/operation/OGP_PRESET_SET_GROUP">Load Preset Group</a>, which is used
to toggle between the 3 groups of presets (video, photo, and timelapse). The preset groups ID’s are:</p>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th style="text-align: center">Bytes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Load Video Preset Group</td>
      <td style="text-align: center">1000</td>
    </tr>
    <tr>
      <td>Load Photo Preset Group</td>
      <td style="text-align: center">1001</td>
    </tr>
    <tr>
      <td>Load Timelapse Preset Group</td>
      <td style="text-align: center">1002</td>
    </tr>
  </tbody>
</table>

<div>
    <ul class="tab tab-linked" data-tab="7f20c6f8-a4cb-4b99-80f6-03e039ee0fe4">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="7f20c6f8-a4cb-4b99-80f6-03e039ee0fe4">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="n">GOPRO_BASE_URL</span> <span class="o">+</span> <span class="sh">"</span><span class="s">/gopro/camera/presets/set_group?id=1000</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="p">=</span> <span class="n">wifi</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="nc">GOPRO_BASE_URL</span> <span class="p">+</span> <span class="s">"gopro/camera/presets/load?id=1000"</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div>
    <ul class="tab tab-linked" data-tab="503c8bbe-f72f-4513-ac0b-8748fc5372e0">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="503c8bbe-f72f-4513-ac0b-8748fc5372e0">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Response: </span><span class="si">{</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>This will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Loading the video preset group: sending http://10.5.5.9:8080/gopro/camera/presets/set_group?id=1000
INFO:root:Command sent successfully
INFO:root:Response: {}
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="n">prettyJson</span><span class="p">.</span><span class="nf">encodeToString</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</code></pre></div></div>

<p>The response will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Loading Video Preset Group
GET request to: http://10.5.5.9:8080/gopro/camera/presets/load?id=1000
{
}
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>The response JSON is empty. This is expected in the case of a success.</span>
</div>

<p>You should hear the camera beep and switch to the Cinematic Preset (assuming it wasn’t already set). You can verify
this by seeing the preset name in the pill at bottom middle of the screen.</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/preset.png" alt="Load Preset" style="
            width: 50%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Load Preset

        </figcaption></figure>

<h2 id="set-shutter">Set Shutter</h2>

<p>The next command we will be sending is <a href="/OpenGoPro/http#tag/Control/operation/OGP_SHUTTER">Set Shutter</a>. which is
used to start and stop encoding.</p>

<div>
    <ul class="tab tab-linked" data-tab="19330b62-a996-4c9e-9f56-c2aa0c7a180b">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="19330b62-a996-4c9e-9f56-c2aa0c7a180b">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="n">GOPRO_BASE_URL</span> <span class="o">+</span> <span class="sa">f</span><span class="sh">"</span><span class="s">/gopro/camera/shutter/start</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="p">=</span> <span class="n">wifi</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="nc">GOPRO_BASE_URL</span> <span class="p">+</span> <span class="s">"gopro/camera/shutter/start"</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>This command does not return a JSON response so we don’t print the response</span>
</div>

<p>This will log as such:</p>

<div>
    <ul class="tab tab-linked" data-tab="22da1694-c228-45ae-828b-cd0fc517c047">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="22da1694-c228-45ae-828b-cd0fc517c047">
        
            <li class="active tab-content-container">
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Turning the shutter on: sending http://10.5.5.9:8080/gopro/camera/shutter/start
INFO:root:Command sent successfully
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="n">prettyJson</span><span class="p">.</span><span class="nf">encodeToString</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</code></pre></div></div>

<p>The response will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Setting Shutter On
GET request to: http://10.5.5.9:8080/gopro/camera/shutter/start
{
}
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<p>We can then wait a few seconds and repeat the above procedure to set the shutter off using <code class="language-plaintext highlighter-rouge">gopro/camera/shutter/stop</code>.</p>

<div class="callout warning">
<i class="fa fa-exclamation-triangle fa-2x" style="color: #df5142; margin: 0.25em;"></i><span>The shutter can not be set on if the camera is encoding or set off if the camera is not encoding. An
attempt to do so will result in an error response.</span>
</div>

<h2 id="set-setting">Set Setting</h2>

<p>The next command will be sending is <a href="/OpenGoPro/http#tag/settings">Set Setting</a>.
This end point is used to update all of the settings on the camera. It is analogous to BLE commands like
<a href="/OpenGoPro/tutorials/send-ble-commands#set-the-video-resolution">Set Video Resolution</a>.</p>

<p>It is important to note that many settings are dependent on the video resolution (and other settings).
For example, certain FPS values are not valid with certain resolutions. In general, higher resolutions
only allow lower FPS values. Check the <a href="/OpenGoPro/http#tag/settings/Capabilities">camera capabilities</a>
to see which settings are valid for given use cases.</p>

<p>Let’s build the endpoint first to set the Video Resolution to 1080 (the setting_id and option value comes from
the command table linked above).</p>

<div>
    <ul class="tab tab-linked" data-tab="aaf5fbd3-46ed-48b4-a535-ffb51b6be4b3">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="aaf5fbd3-46ed-48b4-a535-ffb51b6be4b3">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="n">GOPRO_BASE_URL</span> <span class="o">+</span> <span class="sa">f</span><span class="sh">"</span><span class="s">/gopro/camera/setting?setting=2&amp;option=9</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="p">=</span> <span class="n">wifi</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="nc">GOPRO_BASE_URL</span> <span class="p">+</span> <span class="s">"gopro/camera/setting?setting=2&amp;option=9"</span><span class="p">)</span>
</code></pre></div></div>

</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div>
    <ul class="tab tab-linked" data-tab="d78886a8-6ed6-4bf6-a8f9-02aff3d078dc">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="d78886a8-6ed6-4bf6-a8f9-02aff3d078dc">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Response: </span><span class="si">{</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>This will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Setting the video resolution to 1080: sending http://10.5.5.9:8080/gopro/camera/setting?setting_id=2&opt_value=9
INFO:root:Command sent successfully
INFO:root:Response: {}
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Timber</span><span class="p">.</span><span class="nf">i</span><span class="p">(</span><span class="n">prettyJson</span><span class="p">.</span><span class="nf">encodeToString</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
</code></pre></div></div>

<p>The response will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Setting Resolution to 1080
GET request to: http://10.5.5.9:8080/gopro/camera/setting?setting=2&option=9
{
}
</span></code></pre></div></div>

</li>
        
    </ul>
</div>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>The response JSON is empty. This is expected in the case of a success.</span>
</div>

<p>You should hear the camera beep and see the video resolution change to 1080 in the pill in the bottom-middle of the
screen:</p>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/video_resolution.png" alt="Video Resolution" style="
            width: 50%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Video Resolution

        </figcaption></figure>

<p>As a reader exercise, try using the <a href="#get-camera-state">Get Camera State</a> command to verify that the resolution has changed.</p>

<h2 id="preview-stream">Preview Stream</h2>

<p>The next command we will be sending is
<a href="/OpenGoPro/http#tag/Preview-Stream/operation/OGP_PREVIEW_STREAM_START">Start Preview Stream</a>. This command will
enable (or disable) the preview stream . It is then possible to view the preview stream from a media player.</p>

<p>The commands write to the following endpoints:</p>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>start preview stream</td>
      <td>/gopro/camera/stream/start</td>
    </tr>
    <tr>
      <td>stop preview stream</td>
      <td>/gopro/camera/stream/stop</td>
    </tr>
  </tbody>
</table>

<p>Let’s build the endpoint then send the GET request and check the response for errors.
Any errors will raise an exception.</p>

<div>
    <ul class="tab tab-linked" data-tab="32f7580f-ead4-4bc8-a92e-6068174340bf">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="32f7580f-ead4-4bc8-a92e-6068174340bf">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="n">GOPRO_BASE_URL</span> <span class="o">+</span> <span class="sh">"</span><span class="s">/gopro/camera/stream/start</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
</code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<p>Lastly, we print the response’s JSON data:</p>

<div>
    <ul class="tab tab-linked" data-tab="cc93e756-ebc4-4b30-9994-bfbd5f2d6cf0">
        
            <li class="active">
                <a href="">python </a>
            </li>
        
            <li>
                <a href="">kotlin </a>
            </li>
        
        </ul>
        <ul class="tab-content" id="cc93e756-ebc4-4b30-9994-bfbd5f2d6cf0">
        
            <li class="active tab-content-container">
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Response: </span><span class="si">{</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>

<p>This will log as such:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">INFO:root:Starting the preview stream: sending http://10.5.5.9:8080/gopro/camera/stream/start
INFO:root:Command sent successfully
INFO:root:Response: {}
</span></code></pre></div></div>

</li>
        
            <li class="tab-content-container">
<p>TODO</p>
</li>
        
    </ul>
</div>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>The response JSON is empty. This is expected in the case of a success.</span>
</div>

<p>Once enabled, the stream can be viewed at <code class="language-plaintext highlighter-rouge">udp://@:8554</code>.</p>

<p>Here is an example of viewing this using <a href="https://www.videolan.org/">VLC</a>:</p>

<div class="callout note">
<i class="fa fa-clipboard fa-2x" style="color: #3498db; margin: 0.25em;"></i><span>The screen may slightly vary depending on your OS</span>
</div>

<ol>
  <li>Select <strong>Media–&gt;Open Network Stream</strong>
</li>
  <li>Enter the path as such:</li>
</ol>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/preview_stream.png" alt="Preview Stream" style="
            width: 70%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Configure Preview Stream

        </figcaption></figure>

<ol>
  <li>Select play</li>
  <li>The preview stream should now be visible.</li>
</ol>

<p><strong>Quiz time! 📚 ✏️</strong></p>

<div id="quiz_2b6f1bad-7205-49e1-85fb-e9f325be027e" class="quiz">
    <div>
        <div id="question_2b6f1bad-7205-49e1-85fb-e9f325be027e" class="quiz__question">What is the significance of empty JSON in an HTTP response?</div>
        <div id="answers_2b6f1bad-7205-49e1-85fb-e9f325be027e">
        
            <input type="radio" name="question" value="A"><label>A: Always an error! The command was not received correctly.</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: If the status is ok (200), this is expected.</label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: This is expected for errors (code other than 200) but not expected for ok (200).</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('2b6f1bad-7205-49e1-85fb-e9f325be027e', 'B')">Submit Answer</button>
    <div id="results_2b6f1bad-7205-49e1-85fb-e9f325be027e" style="display: none">
        <span id="correct_2b6f1bad-7205-49e1-85fb-e9f325be027e" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_2b6f1bad-7205-49e1-85fb-e9f325be027e" style="display: none"> Incorrect!! 😭 The correct answer is B.</span>
        It is common for the JSON response to be empty if the command was received successfully
    but there is no additional information to return at the current time.
    </div>
</div>

<div id="quiz_d12bc28a-44c3-4151-be42-c3a466ca3d60" class="quiz">
    <div>
        <div id="question_d12bc28a-44c3-4151-be42-c3a466ca3d60" class="quiz__question">Which of the of the following is not a real preset group?</div>
        <div id="answers_d12bc28a-44c3-4151-be42-c3a466ca3d60">
        
            <input type="radio" name="question" value="A"><label>A: Timelapse</label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: Photo</label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: Burst</label>
            <br>
        
            <input type="radio" name="question" value="D"><label>D: Video</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('d12bc28a-44c3-4151-be42-c3a466ca3d60', 'C')">Submit Answer</button>
    <div id="results_d12bc28a-44c3-4151-be42-c3a466ca3d60" style="display: none">
        <span id="correct_d12bc28a-44c3-4151-be42-c3a466ca3d60" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_d12bc28a-44c3-4151-be42-c3a466ca3d60" style="display: none"> Incorrect!! 😭 The correct answer is C.</span>
        There are 3 preset groups (Timelapse, Photo, and Video). These can be
    set via the Load Preset Group command.
    </div>
</div>

<div id="quiz_dab2ae2f-490b-43f5-9058-ca171db3444e" class="quiz">
    <div>
        <div id="question_dab2ae2f-490b-43f5-9058-ca171db3444e" class="quiz__question">How do you query the current video resolution setting (id = 2) via WiFi?</div>
        <div id="answers_dab2ae2f-490b-43f5-9058-ca171db3444e">
        
            <input type="radio" name="question" value="A"><label>A: Send GET to <code class="language-plaintext highlighter-rouge">/gopro/camera/state?setting_id=2</code></label>
            <br>
        
            <input type="radio" name="question" value="B"><label>B: Send GET to <code class="language-plaintext highlighter-rouge">/gopro/camera/state?get_setting=2</code></label>
            <br>
        
            <input type="radio" name="question" value="C"><label>C: Send POST to <code class="language-plaintext highlighter-rouge">/gopro/camera/state</code> with request ‘setting_id=2’</label>
            <br>
        
            <input type="radio" name="question" value="D"><label>D: None of the Above</label>
            <br>
        
        </div>
    </div>
    <button onclick="showResults('dab2ae2f-490b-43f5-9058-ca171db3444e', 'D')">Submit Answer</button>
    <div id="results_dab2ae2f-490b-43f5-9058-ca171db3444e" style="display: none">
        <span id="correct_dab2ae2f-490b-43f5-9058-ca171db3444e" style="display: none">  Correct!! 😃</span>
        <span id="incorrect_dab2ae2f-490b-43f5-9058-ca171db3444e" style="display: none"> Incorrect!! 😭 The correct answer is D.</span>
        You can’t query individual settings or statuses with the HTTP API. In order to get the value of a specific setting you’ll need to send a GET to <code class="language-plaintext highlighter-rouge">/gopro/camera/state</code> and parse the value of the desired setting from the JSON response.
    </div>
</div>

<h1 id="troubleshooting">Troubleshooting</h1>

<h2 id="http-logging">HTTP Logging</h2>

<p><a href="https://www.wireshark.org/">Wireshark</a> can be used to view the HTTP commands and responses
between the PC and the GoPro.</p>

<ol>
  <li>Start a Wireshark capture on the WiFi adapter that is used to connect to the GoPro</li>
  <li>Filter for the GoPro IP address (10.5.5.9)</li>
</ol>

<figure class="" style="
        display: block;
        text-align: center;
        margin: 10px auto;
    ">
    <img src="/OpenGoPro/assets/images/tutorials/wireshark.png" alt="Wireshark" style="
            width: 100%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        "><figcaption>
            Wireshark

        </figcaption></figure>

<h1 id="good-job">Good Job!</h1>

<div class="callout success">
<i class="fa fa-check-circle fa-2x" style="color: #2dcb71; margin: 0.25em;"></i><span>Congratulations 🤙</span>
</div>

<p>You can now send any of the HTTP commands defined in the
<a href="/OpenGoPro/http">Open GoPro Interface</a> that return JSON responses. You
may have noted that we did not discuss one of these (Get Media List) in this tutorial. Proceed to the
next tutorial to see how to get and perform operations using the media list.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-03-25T09:12:44-07:00">March 25, 2025</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/OpenGoPro/tutorials/connect-wifi" class="pagination--pager" title="Tutorial 6: Connect WiFi
">Previous</a>
    
    
      <a href="/OpenGoPro/tutorials/camera-media-list" class="pagination--pager" title="Tutorial 8: Camera Media List
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
    <ul class="social-icons">
        
        <li><strong>Follow:</strong></li>
           
        <li>
            <a href="https://www.gopro.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i>
                Website</a>
        </li>
          
        <li>
            <a href="https://twitter.com/GoPro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>
                Twitter</a>
        </li>
          
        <li>
            <a href="https://www.facebook.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i>
                Facebook</a>
        </li>
          
        <li>
            <a href="https://github.com/gopro" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i>
                GitHub</a>
        </li>
          
        <li>
            <a href="https://www.instagram.com/gopro/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i>
                Instagram</a>
        </li>
           
    </ul>
</div>

<div class="page__footer-copyright">
    © 2025 GoPro. Powered by
    <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp;
    <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.
    <p>
        Can be used with GoPro® HERO9 and HERO10 cameras. You must include the following text on
        every page where it can be seen by someone purchasing such an item: <em>"This product
        and/or service is not affiliated with, endorsed by or in any way associated with
        GoPro Inc. or its products and services. GoPro, HERO, and their respective logos
        are trademarks or registered trademarks of GoPro, Inc."</em>
    </p>
</div>

      </footer>
    </div>

    
  <script src="/OpenGoPro/assets/js/main.min.js"></script>




<script src="/OpenGoPro/assets/js/lunr/lunr.min.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-store.js"></script>
<script src="/OpenGoPro/assets/js/lunr/lunr-en.js"></script>






  </body>
</html>
